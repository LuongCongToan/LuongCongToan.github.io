window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AmaWrapper:[function(t,e,o){"use strict";cc._RF.push(e,"09ef1bb6o1IXLCekELLi+rr","AmaWrapper");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./event-manager"),r=cc._decorator,c=r.ccclass,s=(r.property,function(){function t(){}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){window.song=t,AmaSdk.MepEventEmitter.emit("create")},t.prototype.start=function(){AmaSdk.MepEventEmitter.on("start",function(t){AmaSdk.ContentReader.getNotes(t.levelUrl).then(function(t){i.default.instance.dispatch("midi_load_completed",t)}).catch(function(t){console.log({error:t})})})},t.prototype.emitLoadCompleted=function(){AmaSdk.MepEventEmitter.emit("load-completed")},t._instance=null,t=e=n([c],t)}());o.default=s,cc._RF.pop()},{"./event-manager":"event-manager"}],BeatNode:[function(t,e,o){"use strict";cc._RF.push(e,"92a54JHxN9KbLbibPDLk56w","BeatNode");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./core/event-manager"),s=cc._decorator,a=s.ccclass,u=s.property;(function(t){t[t.Missed=0]="Missed",t[t.Great=1]="Great",t[t.Perfect=2]="Perfect",t[t.SupperPerfect=3]="SupperPerfect"})(r=o.ScoreEnum||(o.ScoreEnum={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fromScale=1,e.toScale=1,e.tween=null,e.areaID=0,e}return n(e,t),e.prototype.move=function(t,e,o,n,i){var s=this;c.default.instance.register("touch-press",function(t,e,o,n,i){if(s.areaID==t){var a=s.node.parent.convertToNodeSpaceAR(o).y,u=s.node.parent.convertToNodeSpaceAR(n).y,l=s.node.parent.convertToNodeSpaceAR(i).y;cc.log("perfectY = "+a+" supperY "+u+" great "+l),u>s.node.y?c.default.instance.dispatch("beat_node_destroy",s.node,s.areaID,e,r.SupperPerfect):a>s.node.y?c.default.instance.dispatch("beat_node_destroy",s.node,s.areaID,e,r.Perfect):l>s.node.y&&c.default.instance.dispatch("beat_node_destroy",s.node,s.areaID,e,r.Great)}},this),c.default.instance.register("pause-game",function(){s.tween&&s.tween.stop()},this),c.default.instance.register("resume-game",function(){s.tween&&s.tween.start()},this);var a=1*i/n,u=cc.Vec2.ZERO;cc.Vec2.lerp(u,e,o,a),this.node.setScale(this.fromScale),this.node.setPosition(e),this.tween=cc.tween(this.node).to(i,{position:u,scale:this.toScale},{easing:"linear"}).call(function(){c.default.instance.dispatch("beat_node_destroy",s.node,r.Missed)}).start()},e.prototype.stop=function(){c.default.instance.unregisterTarget(this),null!=this.tween&&this.tween.stop(),this.tween=null},e.prototype.onDestroy=function(){c.default.instance.unregisterTarget(this)},e.prototype.contains=function(t){return!!this.node.getBoundingBoxToWorld().contains(t)},i([u({type:cc.Float})],e.prototype,"fromScale",void 0),i([u({type:cc.Float})],e.prototype,"toScale",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./core/event-manager":"event-manager"}],DownloadFileUtil:[function(t,e,o){"use strict";cc._RF.push(e,"0ceedkXbjJEQ5v9++Ec84Cl","DownloadFileUtil");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t.get=function(t,e){var o=new XMLHttpRequest;o.open("GET",t,!0);try{o.send(),o.status}catch(t){cc.log(""+t)}},t.downloadTextFile=function(t,e){},t=n([r],t)}());o.default=c,cc._RF.pop()},{}],GamePlay:[function(t,e,o){"use strict";cc._RF.push(e,"a3089WfcVVC3a5DbkZkjoN9","GamePlay");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./core/AmaWrapper"),s=t("./core/event-manager"),a=t("./BeatNode"),u=t("./Utils"),l=t("./UIGamePlay"),p=t("./Line"),f=t("./TouchLineEffect"),d=t("./LongNote"),h=t("./ScoreEffectController"),y=t("./UILoading"),v=cc._decorator,g=v.ccclass,_=v.property;(function(t){t[t.Init=0]="Init",t[t.CountDown=1]="CountDown",t[t.Playing=2]="Playing",t[t.End=3]="End",t[t.Paused=4]="Paused"})(r=o.GameState||(o.GameState={})),function(t){t[t.Single=0]="Single",t[t.Long=1]="Long",t[t.Multi=2]="Multi"}(o.NoteType||(o.NoteType={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poolSize=0,e.moveDuration=0,e.timeTolerance=.1,e.baseScore=1,e.startPositions=[],e.endPositions=[],e.touchAreas=[],e.touchLineEffect=null,e.cam3Droot=null,e.getScoreEffect=null,e.anim321=null,e.comboCountText=null,e.loadingUI=null,e.windEffects=[],e.arrayNotes=null,e.beatNodes=[],e._state=r.Init,e.timeTraveled=0,e.nodeIndex=0,e._isMidiLoaded=!1,e.songUrl="",e.backgroundMusic=null,e.lines=[],e.tweenComboCount=null,e.totalNoteCollected=0,e.touchQueue={},e.totalStars=0,e.minstoneStars=[],e._currentAudioID=-1,e.isGamePaused=!1,e.frameCount=0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.loadingUI.show(),this.spawnPosition=new cc.Vec2(this.spawnPos.position.x,this.spawnPos.position.y),this.endPosition=new cc.Vec2(this.endPos.position.x,this.endPos.position.y),this.gameScore=0,this.comboCount=0,this._isMidiLoaded=!1,this.setState(r.Init),c.default.instance;var e="https://luongcongtoan.github.io/cloud/NoiNayCoAnh_STMTP.mp3";c.default.instance.init({songId:"yeu-nhu-ngay-hom-qua",mp3Url:e,levelUrl:"https://luongcongtoan.github.io/cloud/NoiNayCoAnh_STMTP.bin",duration:287,title:"Mi\u1ec1n C\xe1t Tr\u1eafng",artist:"L\xe2m Ch\xed Khanh"}),cc.loader.load(e,function(t,e,o){cc.log("aaa "+t+" bbb "+e)},function(e,o){t.backgroundMusic=o,l.default.instance.setMp3Duration(Math.floor(o._audio.duration)),t.loadingUI.hide()}),c.default.instance.start(),this.singleNodePool=new cc.NodePool,this.initLines(),this.anim321.active=!1},e.prototype.initLines=function(){for(var t=0;t<4;t++){var e=this.startPositions[t],o=this.endPositions[t],n=new p.default;n.start=cc.v2(e.parent.x+e.x,e.parent.y),n.end=cc.v2(o.parent.x+o.x,o.parent.y),this.lines.push(n)}},e.prototype.setState=function(t){var e=this;if(t!=this._state){if(t==r.CountDown){this.anim321.active=!0;var o=this.anim321.getComponentInChildren(cc.Animation);o.play(),o.on("finished",function(){e.anim321.active=!1,e.setState(r.Playing),e._currentAudioID>=0?(cc.audioEngine.resume(e._currentAudioID),s.default.instance.dispatch("resume-game")):e._currentAudioID=cc.audioEngine.play(e.backgroundMusic,!1,1),e.isGamePaused=!1})}this._state=t}},e.prototype.start=function(){var t=this;s.default.instance.register("midi_load_completed",function(e){cc.log("Note count: "+e.length);var o=0+t.timeTolerance;t.arrayNotes=e.map(function(e){return e.time=e.time-t.moveDuration,e}).filter(function(t){return t.time>0}).filter(function(e){return e.time>o&&(o=e.time+t.timeTolerance,!0)}),cc.log("Note count: "+t.arrayNotes.length),l.default.instance.totalNotes=t.arrayNotes.length,t.minstoneStars[0]=Math.round(.5*t.arrayNotes.length),t.minstoneStars[1]=Math.round(.8*t.arrayNotes.length),t.minstoneStars[2]=Math.round(t.arrayNotes.length-1),t._isMidiLoaded=!0},this),s.default.instance.register("beat_node_destroy",function(e,o,n,i){if(i>a.ScoreEnum.Missed){t.getScoreEffect.play(i),t.showBottomEffect(n,o);var r=t.baseScore;i==a.ScoreEnum.Perfect?r=1.1*t.baseScore:i==a.ScoreEnum.SupperPerfect&&(r=1.2*t.baseScore),t.comboCount<50?r+=1.1*t.comboCount:t.comboCount<100?r+=1.2*t.comboCount:t.comboCount<150?r+=1.3*t.comboCount:t.comboCount<200?r+=1.4*t.comboCount:t.comboCount<400?r+=1.5*t.comboCount:t.comboCount<600?r+=1.5*t.comboCount:t.comboCount<800?r+=1.7*t.comboCount:r+=1.8*t.comboCount,t.comboCount>0&&t.playComboCount(t.comboCount),t.gameScore+=r,t.comboCount++,l.default.instance.setScore(t.gameScore),t.totalNoteCollected++,l.default.instance.updateNoteProgressBar(t.totalNoteCollected),t.updateStarCollected(t.totalNoteCollected)}else t.comboCount=0;t.destroyNode(e)},this),s.default.instance.register("long-note-hold",function(e,o,n){t.getScoreEffect.play(n),t.gameScore+=n,t.totalNoteCollected++,t.frameCount++,t.frameCount%3==0&&t.showBottomEffect(o,e)},this),c.default.instance.emitLoadCompleted(),this.addEvents()},e.prototype.updateStarCollected=function(t){0==this.totalStars&&t>=this.minstoneStars[0]?(this.windEffects[0].active=!0,this.totalStars++,l.default.instance.onGetStar(this.totalStars)):1==this.totalStars&&t>=this.minstoneStars[1]?(this.windEffects[0].active=!1,this.windEffects[1].active=!0,this.totalStars++,l.default.instance.onGetStar(this.totalStars)):2==this.totalStars&&t>=this.minstoneStars[2]&&(this.windEffects[1].active=!1,this.windEffects[2].active=!0,this.totalStars++,l.default.instance.onGetStar(this.totalStars))},e.prototype.showBottomEffect=function(t,e){var o=cc.instantiate(this.touchNodeEffect),n=t.getLocation();o.setPosition(u.default.mapNewRange(n.x,0,720,-3.3,3.3),-6.6,-15),o.parent=this.cam3Droot,this.scheduleOnce(function(){o.destroy()},.5)},e.prototype.addEvents=function(){var t=cc.find("Canvas");t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.removeEvents=function(){var t=cc.find("Canvas");t.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onTouchStart=function(t){var e=t.touch.getID();if(this.touchQueue[e]=t.touch,this._state==r.Playing){this.touchLineEffect.onTouchStart(t.touch);var o=this.getTouchArea(t.touch.getLocation());o>=0&&s.default.instance.dispatch("touch-press",o,t.touch,this.perffectPosition.getPosition(),this.sPerffectPosition.getPosition(),this.greatPosition.getPosition())}},e.prototype.proccessTouch=function(t){var e=this;this.beatNodes.forEach(function(o){if(e.perffectPosition.y>o.node.y&&o.contains(t)){var n=cc.instantiate(e.touchNodeEffect);n.setPosition(o.node.getPosition()),n.parent=e.node}})},e.prototype.calculateScore=function(){return a.ScoreEnum.Great},e.prototype.onTouchMove=function(t){var e=t.touch.getID();this.touchQueue[e]=t.touch,this._state==r.Playing&&this.touchLineEffect.onTouchMove(t.touch)},e.prototype.onTouchEnd=function(t){this.frameCount=0,delete this.touchQueue[t.touch.getID()],this._state==r.Playing&&this.touchLineEffect.onTouchEnd(t.touch)},e.prototype.onTouchCancel=function(t){this.frameCount=0,delete this.touchQueue[t.touch.getID()],this._state==r.Playing&&this.touchLineEffect.onTouchEnd(t.touch)},e.prototype.getTouchArea=function(t){for(var e=0;e<this.touchAreas.length;e++){var o=this.touchAreas[e].getParent().convertToNodeSpaceAR(t);if(this.touchAreas[e].getBoundingBox().contains(o))return e}return-1},e.prototype.update=function(t){switch(this._state){case r.Init:this._isMidiLoaded&&null!=this.backgroundMusic&&this.setState(r.CountDown);break;case r.Playing:for(var e=0,o=Object.entries(this.touchQueue);e<o.length;e++){var n=o[e],i=(n[0],n[1]);s.default.instance.dispatch("touch-hold",i)}this.updatePlaying(t),l.default.instance.updateUITime(this.timeTraveled)}},e.prototype.updatePlaying=function(t){this.timeTraveled+=t;var e=this.arrayNotes[this.nodeIndex];this.timeTraveled>e.time&&(e.duration>.5?this.spawLongNode(e):this.spawnNode(e),this.nodeIndex++,this.nodeIndex>=this.arrayNotes.length&&(this._state=r.End))},e.prototype.spawnNode=function(t){var e=null;e=this.singleNodePool.size()>0?this.singleNodePool.get():cc.instantiate(this.singleNodePrefab);var o=t.midi%12,n=this.lines[o],i=e.getComponent(a.default);i.areaID=o,this.beatNodes.push(i),e.parent=this.node,e.setPosition(n.start),e.getComponent(a.default).move(t,n.start,n.end,this.moveDuration,this.moveDuration+.5)},e.prototype.spawLongNode=function(t){var e=null;e=cc.instantiate(this.longNodePrefab);var o=t.midi%12,n=this.lines[o];e.getComponent(d.default).areaID=o,e.parent=this.node,e.setPosition(n.start),e.getComponent(d.default).move(t,n.start,n.end,this.moveDuration,this.moveDuration+.5)},e.prototype.destroyNode=function(t){this.singleNodePool.put(t);var e=t.getComponent(a.default);if(null!=t){e.stop();var o=this.beatNodes.indexOf(e);-1!=o&&this.beatNodes.splice(o,1)}},e.prototype.onDestroy=function(){s.default.instance.unregisterTarget(this)},e.prototype.onButtonPauseClick=function(){this._state==r.Playing&&(this.isGamePaused=!0,s.default.instance.dispatch("pause-game"),this.setState(r.Paused),l.default.instance.showPaused(),cc.audioEngine.pause(this._currentAudioID),cc.director.pause())},e.prototype.onButtonContinueClick=function(){this._state==r.Paused&&(l.default.instance.hidePaused(),this.setState(r.CountDown),cc.director.resume())},e.prototype.playComboCount=function(t){var e=this;null!=this.tweenComboCount&&this.tweenComboCount.stop(),this.tweenComboCount=null,this.comboCountText.string=t+"",this.comboCountText.node.setScale(.7),this.comboCountText.enabled=!0,this.tweenComboCount=cc.tween(this.comboCountText.node).to(.15,{scale:1}).call(function(){e.comboCountText.enabled=!1}).start()},i([_({type:cc.Integer})],e.prototype,"poolSize",void 0),i([_({type:cc.Float})],e.prototype,"moveDuration",void 0),i([_({type:cc.Float})],e.prototype,"timeTolerance",void 0),i([_({type:cc.Integer})],e.prototype,"baseScore",void 0),i([_(cc.Prefab)],e.prototype,"singleNodePrefab",void 0),i([_(cc.Prefab)],e.prototype,"longNodePrefab",void 0),i([_(cc.Node)],e.prototype,"spawnPos",void 0),i([_(cc.Node)],e.prototype,"endPos",void 0),i([_(cc.Node)],e.prototype,"perffectPosition",void 0),i([_(cc.Node)],e.prototype,"sPerffectPosition",void 0),i([_(cc.Node)],e.prototype,"greatPosition",void 0),i([_([cc.Node])],e.prototype,"startPositions",void 0),i([_([cc.Node])],e.prototype,"endPositions",void 0),i([_([cc.Node])],e.prototype,"touchAreas",void 0),i([_(cc.Prefab)],e.prototype,"touchNodeEffect",void 0),i([_(f.default)],e.prototype,"touchLineEffect",void 0),i([_(cc.Node)],e.prototype,"cam3Droot",void 0),i([_(h.default)],e.prototype,"getScoreEffect",void 0),i([_(cc.Node)],e.prototype,"anim321",void 0),i([_(cc.Label)],e.prototype,"comboCountText",void 0),i([_(y.default)],e.prototype,"loadingUI",void 0),i([_([cc.Node])],e.prototype,"windEffects",void 0),e=i([g],e)}(cc.Component);o.default=m,cc._RF.pop()},{"./BeatNode":"BeatNode","./Line":"Line","./LongNote":"LongNote","./ScoreEffectController":"ScoreEffectController","./TouchLineEffect":"TouchLineEffect","./UIGamePlay":"UIGamePlay","./UILoading":"UILoading","./Utils":"Utils","./core/AmaWrapper":"AmaWrapper","./core/event-manager":"event-manager"}],LineEffect:[function(t,e,o){"use strict";cc._RF.push(e,"bd5e69Nxu9A9ppEPuTdZEsE","LineEffect");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.material=null,e.isFading=!1,e.timelerp=.5,e.timelerpcache=0,e}return n(e,t),e.prototype.onLoad=function(){this.material=this.getComponent(cc.MeshRenderer).getMaterial(0)},e.prototype.show=function(t,e){this.orgColor=t,this.endColor=new cc.Color(t.r,t.g,t.b,t.a),this.node.active=!0,this.isFading=e,this.material.setProperty("diffuseColor",t),this.timelerpcache=0},e.prototype.hide=function(){this.isFading=!0},e.prototype.update=function(t){if(this.isFading)if(this.timelerpcache+=t,this.timelerpcache<=this.timelerp){var e=this.timelerpcache/this.timelerp,o=new cc.Color(this.orgColor.r,this.orgColor.g,this.orgColor.r,cc.misc.lerp(this.orgColor.a,0,e));this.material.setProperty("diffuseColor",o)}else this.isFading=!1,this.node.active=!1,this.destroy()},e=i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Line:[function(t,e,o){"use strict";cc._RF.push(e,"c17b1o9bGNJxpgavI2nJ5ox","Line");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t=n([r],t)}());o.default=c,cc._RF.pop()},{}],LongNote:[function(t,e,o){"use strict";cc._RF.push(e,"8d22a+stjdEmYCjI+HeYc6d","LongNote");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BeatNode"),c=t("./MovingObject"),s=t("./core/event-manager"),a=cc._decorator,u=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.head=null,e.tail=null,e.body=null,e.isMoving=!1,e.isTailMoving=!1,e.noteLength=600,e.currentTouch=null,e.scoreType=r.ScoreEnum.Missed,e.wasNoteHoldFail=!1,e}return n(e,t),e.prototype.move=function(t,e,o,n,i){var a=this;this.noteLength=400*t.duration,s.default.instance.register("touch-press",function(t,e,o,n,i){if(a.wasNoteHoldFail,a.areaID==t){a.currentTouch=null;var c=a.node.convertTouchToNodeSpaceAR(e);if(a.head.getBoundingBox().contains(c)){a.head.getComponent(cc.Sprite).enabled=!1,a.currentTouch=e;var u=a.node.convertToNodeSpaceAR(o).y,l=a.node.convertToNodeSpaceAR(n).y,p=a.node.convertToNodeSpaceAR(i).y;l>a.head.y?(s.default.instance.dispatch("long-note-hold",a.areaID,e,r.ScoreEnum.SupperPerfect),a.scoreType=r.ScoreEnum.SupperPerfect):u>a.head.y?(s.default.instance.dispatch("long-note-hold",a.areaID,e,r.ScoreEnum.Perfect),a.scoreType=r.ScoreEnum.Perfect):p>a.head.y&&(s.default.instance.dispatch("long-note-hold",a.areaID,e,r.ScoreEnum.Great),a.scoreType=r.ScoreEnum.Great)}}},this),s.default.instance.register("touch-hold",function(t){null!=a.currentTouch&&(a.currentTouch.getID()==t.getID()?s.default.instance.dispatch("long-note-hold",a.areaID,t,a.scoreType):(a.currentTouch=null,a.wasNoteHoldFail=!0))},this),this.initPos=this.node.getPosition(),this.childNotePositionFrom=cc.Vec2.ZERO,this.childNotePositionTo=this.node.convertToNodeSpaceAR(o),this.duration=n,this.externDuration=i,this.isMoving=!0,this.head.setPosition(cc.Vec2.ZERO),this.head.getComponent(c.default).moveAndScale(this.childNotePositionFrom,this.childNotePositionTo,this.externDuration,this.fromScale,this.toScale,this.duration,null),this.head.active=!0,this.tail.setScale(this.fromScale),this.tail.setPosition(cc.Vec2.ZERO),this.tail.active=!1,this.body.height=1,this.body.active=!0,s.default.instance.register("pause-game",function(){a.isMoving=!1,a.tail.getComponent(c.default).onPause(),a.head.getComponent(c.default).onPause()},this),s.default.instance.register("resume-game",function(){a.isMoving=!0,a.tail.getComponent(c.default).onResume(),a.head.getComponent(c.default).onResume()},this)},e.prototype.onDestroy=function(){s.default.instance.unregisterTarget(this),this.unscheduleAllCallbacks()},e.prototype.update=function(t){var e=this;if(this.isMoving){var o=this.head.getPosition(),n=this.tail.getPosition(),i=o.sub(n),r=i.mag();if(r>20){this.body.height=r,this.body.setPosition(o);var s=cc.misc.radiansToDegrees(i.angle(cc.v2(0,1)));i.x<0?s=180-s:s-=180,this.body.rotation=s;var a=this.tail.getComponent(c.default);r>=this.noteLength&&!a.isMoving&&(this.tail.active=!0,this.tail.getComponent(c.default).moveAndScale(this.childNotePositionFrom,this.childNotePositionTo,this.externDuration,this.fromScale,this.toScale,this.duration,function(){e.destroy()}))}}},i([l(cc.Node)],e.prototype,"head",void 0),i([l(cc.Node)],e.prototype,"tail",void 0),i([l(cc.Node)],e.prototype,"body",void 0),e=i([u],e)}(r.default);o.default=p,cc._RF.pop()},{"./BeatNode":"BeatNode","./MovingObject":"MovingObject","./core/event-manager":"event-manager"}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"6b7f5LT0UxMBZU4TmCAzEJ0","MainMenu");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(t){r(t)}}function s(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(c,s)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.loadFile=function(t){return r(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return[4,fetch(t)];case 1:return e=o.sent(),cc.log(JSON.stringify(e)),cc.log(e.text()),[2]}})})},e=i([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{}],MidiNoteGenerator:[function(t,e,o){"use strict";cc._RF.push(e,"f17d2VxUQtCDrziyz2LHqCd","MidiNoteGenerator");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t=n([r],t)}());o.default=c,cc._RF.pop()},{}],MovingObject:[function(t,e,o){"use strict";cc._RF.push(e,"47053VPB8JJNJTlr0YTgSDi","MovingObject");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMoving=!1,e}return n(e,t),e.prototype.moveAndScale=function(t,e,o,n,i,r,c){var s=this,a=1*o/r,u=cc.Vec2.ZERO;cc.Vec2.lerp(u,t,e,a),this.node.setScale(n),this.node.setPosition(t),this.tween=cc.tween(this.node).to(o,{position:u,scale:i},{easing:"linear"}).call(function(){s.isMoving=!1,null!=c&&c()}).start(),this.isMoving=!0},e.prototype.onPause=function(){this.tween&&this.isMoving&&this.tween.stop()},e.prototype.onResume=function(){this.tween&&this.tween.start()},e=i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],NoteData:[function(t,e,o){"use strict";cc._RF.push(e,"1cd8b5ztdNBkY4vi+P7oJQV","NoteData");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t=n([r],t)}());o.default=c,cc._RF.pop()},{}],ScoreEffectController:[function(t,e,o){"use strict";cc._RF.push(e,"ffa61xC6BJHjavqdpv/HWmv","ScoreEffectController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BeatNode"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effects=[],e.effectAnims=[],e.preAnim=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.effects.forEach(function(e){var o=e.getComponent(cc.Animation);o.on("finished",function(){o.node.active=!1}),t.effectAnims.push(o),e.active=!1}),null!=this.animatorUnder&&(this.animatorUnder.node.active=!1)},e.prototype.play=function(t){t!=r.ScoreEnum.Missed&&(this.preAnim&&(this.preAnim.active=!1),this.effects[t-1].active=!0,this.effectAnims[t-1].play(),this.preAnim=this.effects[t-1]),this.animatorUnder.node.active=!0,this.animatorUnder.play("perfect_under")},i([a([cc.Node])],e.prototype,"effects",void 0),i([a([cc.Animation])],e.prototype,"animatorUnder",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./BeatNode":"BeatNode"}],SlideShow:[function(t,e,o){"use strict";cc._RF.push(e,"c0946uo2rVOEoKKj9nvXhlQ","SlideShow");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgsprites=[],e.currentIndex=0,e.moveDuration=2,e}return n(e,t),e.prototype.onLoad=function(){this.bgsprites=this.getComponentsInChildren(cc.Sprite)},e.prototype.start=function(){this.bgsprites[this.currentIndex].node.active=!0,this.schedule(this.changeBackground,20)},e.prototype.changeBackground=function(t){var e,o=this.bgsprites[this.currentIndex];this.currentIndex+1>=this.bgsprites.length?(this.currentIndex=0,e=this.bgsprites[0]):(this.currentIndex++,e=this.bgsprites[this.currentIndex]);var n=o.node.width/2+e.node.width/2,i=o.node.getPosition();e.node.setPosition(cc.v2(i.x+n,i.y)),e.node.active=!0,o.node.runAction(cc.sequence(cc.moveTo(this.moveDuration,cc.v2(i.x-n,i.y)),cc.callFunc(function(){o.node.active=!1}))),e.node.runAction(cc.sequence(cc.moveTo(this.moveDuration,cc.v2(i.x,i.y)),cc.callFunc(function(){o.node.active=!1})))},e=i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"8be62NUMXJKcbNQ7aSOW1RG","SoundManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){this.playingSounds={},this.sounds={}}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),t.prototype.load=function(t,e){var o=this;this.sounds[t]||cc.loader.loadRes(t,cc.AudioClip,function(e,n){o.sounds[t]=n,cc.audioEngine.play(n,!0,1)})},t.prototype.playMusic=function(t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=1),t=t.toLowerCase(),!this.isPlaying(t)&&this.sounds[t]){var n=cc.audioEngine.play(this.sounds[t],e,o);this.playingSounds[t]=n}},t.prototype.pause=function(t){t=t.toLowerCase(),void 0!=this.playingSounds[t]&&cc.audioEngine.pause(this.playingSounds[t])},t.prototype.resume=function(t){t=t.toLowerCase(),void 0!=this.playingSounds[t]&&cc.audioEngine.resume(this.playingSounds[t])},t.prototype.stop=function(t){t=t.toLowerCase(),void 0!=this.playingSounds[t]&&(cc.audioEngine.stop(this.playingSounds[t]),delete this.playingSounds[t])},t.prototype.isPlaying=function(t){return t=t.toLowerCase(),void 0!=this.playingSounds[t]&&cc.audioEngine.getState(this.playingSounds[t])==cc.audioEngine.AudioState.PLAYING},t._instance=null,t=e=n([r],t)}());o.default=c,cc._RF.pop()},{}],TouchLineEffect:[function(t,e,o){"use strict";cc._RF.push(e,"39a09LtlTZCrrJrteB2zbSt","TouchLineEffect");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LineEffect"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.successColor=cc.Color.WHITE,e.wrongColor=cc.Color.WHITE,e.linePrefab=null,e.effectNode=null,e._y=0,e._z=0,e.minDistance=4,e.isMoving=!1,e.prePosX=0,e.tween=null,e.effectPool=[],e.notePool=new cc.NodePool,e.touches={},e}return n(e,t),e.prototype.onLoad=function(){this._y=this.effectNode.position.y,this._z=this.effectNode.position.z},e.prototype.onTouchStart=function(t){if(null==this.touches[t.getID()]){var e=this.createLineEffect(t.getLocation(),!1);this.touches[t.getID()]=e}},e.prototype.createLineEffect=function(t,e){var o=cc.instantiate(this.linePrefab),n=this.node.convertToNodeSpaceAR(t);return o.parent=this.node,o.setPosition(cc.v3(n.x,this._y,this._z)),o.getComponent(r.default).show(this.successColor,e),o},e.prototype.onTouchMove=function(t){var e=t.getID();if(this.touches[e]){var o=this.touches[e],n=t.getLocation();if(Math.abs(o.x-n.x)>this.minDistance){this.createLineEffect(n,!0);var i=this.node.convertToNodeSpaceAR(n);this.touches[e].setPosition(cc.v3(i.x,this._y,this._z))}}},e.prototype.onTouchEnd=function(t){t.getID();var e=this.touches[t.getID()];e&&e.getComponent(r.default).hide(),delete this.touches[t.getID()]},e.prototype.fadeOut=function(t){},i([a(cc.Color)],e.prototype,"successColor",void 0),i([a(cc.Color)],e.prototype,"wrongColor",void 0),i([a(cc.Prefab)],e.prototype,"linePrefab",void 0),i([a(cc.Node)],e.prototype,"effectNode",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./LineEffect":"LineEffect"}],UIGamePlay:[function(t,e,o){"use strict";cc._RF.push(e,"4732cDj+e5J06RGwEGJuYJv","UIGamePlay");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeProgressBar=null,e.songTime=null,e.notesProgress=null,e.flare=null,e.stars=[],e.strSongLength="",e.intSongLength=0,e._totalNote=0,e}var o;return n(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){o._instance=this,this.timeProgressBar.progress=0,this.notesProgress.progress=0},e.prototype.start=function(){this.scoreText.string="Score: 0",this.timeProgressBar.totalLength=this.timeProgressBar.node.width},e.prototype.setScore=function(t){this.scoreText.string="Score: "+t.toFixed(0)},e.prototype.showPaused=function(){this.ingamePause.active=!0},e.prototype.hidePaused=function(){this.ingamePause.active=!1},e.prototype.restart=function(){cc.director.resume(),cc.director.loadScene("Game")},e.prototype.setMp3Duration=function(t){this.strSongLength=this.convert2TimeFormat(t),this.intSongLength=t},e.prototype.convert2TimeFormat=function(t){var e=t%60;return Math.floor(t/60)+":"+(e<10?"0"+e.toString():e.toString())},e.prototype.updateUITime=function(t){var e=this.convert2TimeFormat(Math.floor(t));this.songTime.string=e+"/"+this.strSongLength,this.timeProgressBar.progress=t/this.intSongLength},Object.defineProperty(e.prototype,"totalNotes",{set:function(t){this._totalNote=t},enumerable:!0,configurable:!0}),e.prototype.updateNoteProgressBar=function(t){var e=t/this._totalNote;e>1&&(e=1),this.notesProgress.progress=e;var o=this.notesProgress.node.width,n=-.5*o+e*o;this.flare.setPosition(n,this.flare.position.y)},e.prototype.onGetStar=function(t){t<1||t>3||(this.stars[t-1].active=!0)},e._instance=null,i([s(cc.Label)],e.prototype,"scoreText",void 0),i([s(cc.Node)],e.prototype,"ingamePause",void 0),i([s(cc.ProgressBar)],e.prototype,"timeProgressBar",void 0),i([s(cc.Label)],e.prototype,"songTime",void 0),i([s(cc.ProgressBar)],e.prototype,"notesProgress",void 0),i([s(cc.Node)],e.prototype,"flare",void 0),i([s([cc.Node])],e.prototype,"stars",void 0),e=o=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],UILoading:[function(t,e,o){"use strict";cc._RF.push(e,"ebbd1OG+h5Ou5g6YHSuuEQW","UILoading");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingText=null,e.timeInterval=.5,e.counter=0,e}return n(e,t),e.prototype.onLoad=function(){this.schedule(this.updateText,this.timeInterval)},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.unschedule(this.updateText),this.node.active=!1},e.prototype.updateText=function(){this.counter++,this.counter=cc.misc.clampf(this.counter,0,3),0==this.counter&&(this.loadingText.string="LOADING"),1==this.counter&&(this.loadingText.string="LOADING ."),2==this.counter&&(this.loadingText.string="LOADING .."),3==this.counter&&(this.loadingText.string="LOADING ...")},i([s(cc.Label)],e.prototype,"loadingText",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";var n;cc._RF.push(e,"eda72Ai4jVCrLDUvZdvJgxg","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.LocalHost=0]="LocalHost",t[t.Online=1]="Online"}(n=o.HostType||(o.HostType={}));var i=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.getHostType=function(){return-1!=window.location.hostname.indexOf("localhost")?n.LocalHost:n.Online},t.getRandom=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.inverseLerp=function(t,e,o){return(o-t)/(e-t)},t.mapNewRange=function(t,e,o,n,i){return(t-e)*(i-n)/(o-e)+n},t._instance=null,t}();o.default=i,cc._RF.pop()},{}],"event-manager":[function(t,e,o){"use strict";cc._RF.push(e,"2e623IV4q1D0agaSqJePtJh","event-manager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.eventListenners={}}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(t,e,o,n,i){void 0===o&&(o=null),void 0===n&&(n=0),void 0===i&&(i=!1);var r={target:o,callback:e,priority:n,excuteOnce:i};return this.eventListenners[t]?this.eventListenners[t].push(r):(this.eventListenners[t]=[],this.eventListenners[t].push(r)),this.eventListenners[t].sort(function(t,e){return e.priority-t.priority}),e},t.prototype.registerOnce=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=0),this.register(t,e,o,n,!0)},t.prototype.unregister=function(t,e,o){if(void 0===o&&(o=null),this.eventListenners[t]){for(var n=[],i=0;i<this.eventListenners[t].length;i++){var r=this.eventListenners[t][i];null==e?r.target==o&&n.push(i):r.target==o&&r.callback==e&&n.push(i)}this.eventListenners[t]=this.eventListenners[t].filter(function(t,e){return-1===n.indexOf(e)}),0==this.eventListenners[t].length&&delete this.eventListenners[t]}},t.prototype.unregisterTarget=function(t){var e=function(e){for(var n=[],i=0;i<o.eventListenners[e].length;i++){o.eventListenners[e][i].target==t&&n.push(i)}o.eventListenners[e]=o.eventListenners[e].filter(function(t,e){return-1===n.indexOf(e)}),0==o.eventListenners[e].length&&delete o.eventListenners[e]},o=this;for(var n in this.eventListenners)e(n)},t.prototype.remove=function(t){this.eventListenners[t]&&delete this.eventListenners[t]},t.prototype.dispatch=function(t){for(var e=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(this.eventListenners[t]){var i=[];this.eventListenners[t].forEach(function(t){t.target?t.callback.call(t.target,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]):t.callback(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]),1==t.excuteOnce&&i.push(t)}),i.forEach(function(o){e.unregister(t,o.callback,o.target)})}},t._instance=null,t}();o.default=n,cc._RF.pop()},{}]},{},["BeatNode","GamePlay","Line","LineEffect","LongNote","MainMenu","MovingObject","NoteData","ScoreEffectController","SlideShow","TouchLineEffect","UIGamePlay","UILoading","Utils","AmaWrapper","DownloadFileUtil","MidiNoteGenerator","SoundManager","event-manager"]);