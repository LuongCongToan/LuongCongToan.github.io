window.__require=function t(e,n,o){function i(c,s){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({LabelLocalized:[function(t,e,n){"use strict";cc._RF.push(e,"7b2e4HVWKBCIaBIbtjNKeSy","LabelLocalized");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=r.requireComponent,l=r.executeInEditMode,u=r.menu,p=t("i18n"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._textKey="TEXT_KEY",e.label=null,e.textProp=null,e}return o(e,t),Object.defineProperty(e.prototype,"textKey",{get:function(){return this._textKey},set:function(t){this._textKey=t,this.updateLabel()},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.label=this.getComponent(cc.Label),this.updateLabel()},e.prototype.updateLabel=function(){if(null==this.label&&(this.label=this.getComponent(cc.Label)),this.label){for(var t=this.textKey.trim().split("+"),e="",n=0;n<t.length;++n)e+=p.t(t[n],this.textProp);this.label.string=e}},e.prototype.updateTextProp=function(t){this.textProp=t,this.updateLabel()},i([s()],e.prototype,"_textKey",void 0),i([s({multiline:!0,tooltip:"Enter i18n text key"})],e.prototype,"textKey",null),e=i([c,a(cc.Label),l,u("i18n:MAIN_MENU.component.renderers/LabelLocalized")],e)}(cc.Component);n.default=d,cc._RF.pop()},{i18n:"i18n"}],RichTextLocalized:[function(t,e,n){"use strict";cc._RF.push(e,"a7eff8OjwNOL6lnQdtt4Djg","RichTextLocalized");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./LabelLocalized"),c=cc._decorator,s=c.ccclass,a=(c.property,c.requireComponent),l=c.executeInEditMode,u=c.menu,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.label=this.getComponent(cc.RichText),this.updateLabel()},e.prototype.updateLabel=function(){null==this.label&&(this.label=this.getComponent(cc.RichText)),t.prototype.updateLabel.call(this)},e=i([s,a(cc.RichText),u("i18n:MAIN_MENU.component.renderers/RichTextLocalized"),l],e)}(r.default);n.default=p,cc._RF.pop()},{"./LabelLocalized":"LabelLocalized"}],admob:[function(t,e,n){"use strict";cc._RF.push(e,"5a5fd8qyUJGFLGeU9qdUpwe","admob"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../core/event-manager"),i=function(){function t(){}return t.init=function(){cc.sys.isMobile&&(sdkbox.PluginAdMob.init(),this.listener=new r,sdkbox.PluginAdMob.setListener(this.listener))},t.getVersion=function(){if(cc.sys.isMobile)return sdkbox.PluginAdMob.getVersion()},t.setTestDevices=function(t){cc.sys.isMobile&&sdkbox.PluginAdMob.setTestDevices(t)},t.cache=function(t){cc.sys.isMobile&&sdkbox.PluginAdMob.cache(t)},t.show=function(t){cc.sys.isMobile&&sdkbox.PluginAdMob.show(t)},t.hide=function(t){cc.sys.isMobile&&sdkbox.PluginAdMob.hide(t)},t.isAvailable=function(t){return!!cc.sys.isMobile&&sdkbox.PluginAdMob.isAvailable(t)},t.getCurrBannerWidth=function(t){return cc.sys.isMobile&&sdkbox.PluginAdMob.getCurrBannerWidth(t),-1},t.getCurrBannerHeight=function(t){return cc.sys.isMobile&&sdkbox.PluginAdMob.getCurrBannerHeight(t),-1},t.getCurrBannerWidthInPixel=function(t){return cc.sys.isMobile&&sdkbox.PluginAdMob.getCurrBannerWidthInPixel(t),-1},t.getCurrBannerHeightInPixel=function(t){return cc.sys.isMobile&&sdkbox.PluginAdMob.getCurrBannerHeightInPixel(t),-1},t.setGDPR=function(t){cc.sys.isMobile&&sdkbox.PluginAdMob.setGDPR(t)},t.setListener=function(t){cc.sys.isMobile&&sdkbox.PluginAdMob.setListener(t)},t.EVT_AD_REWARD="adreward",t}();n.AdmodAds=i;var r=function(){function t(){}return t.prototype.adViewDidReceiveAd=function(t){cc.log("adViewDidReceiveAd: "+t)},t.prototype.adViewDidFailToReceiveAdWithError=function(t,e){cc.log("adViewDidFailToReceiveAdWithError: "+t+" msg: "+e)},t.prototype.adViewWillPresentScreen=function(t){cc.log("adViewWillPresentScreen: "+t)},t.prototype.adViewDidDismissScreen=function(t){cc.log("adViewDidDismissScreen: "+t)},t.prototype.adViewWillDismissScreen=function(t){cc.log("adViewWillDismissScreen: "+t)},t.prototype.adViewWillLeaveApplication=function(t){cc.log("adViewWillLeaveApplication: "+t)},t.prototype.reward=function(t,e,n){cc.log("adReward: "+t+" currency: "+e+" amount: "+n),o.default.instance.dispatch(i.EVT_AD_REWARD,t,e,n)},t}();cc._RF.pop()},{"../core/event-manager":"event-manager"}],analytics:[function(t,e,n){"use strict";cc._RF.push(e,"32b05+bVdFOba6dsmQmi7Oj","analytics"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.init=function(){cc.sys.isMobile&&sdkbox.firebase.Analytics.init()},t.getVersion=function(){if(cc.sys.isMobile)return sdkbox.firebase.Analytics.getVersion()},t.setUserProperty=function(t,e){cc.sys.isMobile&&sdkbox.firebase.Analytics.setUserProperty(t,e)},t.setUserID=function(t){cc.sys.isMobile&&sdkbox.firebase.Analytics.setUserID(t)},t.setScreenName=function(t,e){void 0===e&&(e=""),cc.sys.isMobile&&sdkbox.firebase.Analytics.setScreenName(t,e)},t.logEvent=function(t,e){cc.sys.isMobile&&sdkbox.firebase.Analytics.logEvent(t,e)},t.resetAnalyticsData=function(){cc.sys.isMobile&&sdkbox.firebase.Analytics.resetAnalyticsData()},t.setAnalyticsCollectionEnabled=function(t){cc.sys.isMobile&&sdkbox.firebase.Analytics.setAnalyticsCollectionEnabled(t)},t.setGDPR=function(t){cc.sys.isMobile&&sdkbox.firebase.Analytics.setGDPR(t)},t}();n.Analytics=o,cc._RF.pop()},{}],"bubble-controller":[function(t,e,n){"use strict";cc._RF.push(e,"a1eea4X78dH1JpmTxyQg2j/","bubble-controller");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/loader"),c=t("../../core/event-manager"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bubbleWaterPrefab=null,e}var n;return o(e,t),n=e,e.prototype.start=function(){r.default.loaded&&c.default.instance.register(n.EVT_SPAW_BUBBLE,this.spawnBubble,this)},e.prototype.spawnBubble=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=1);var o=this.node.parent.convertToNodeSpaceAR(t),i=cc.instantiate(this.bubbleWaterPrefab);i.parent=this.node,i.position=o;var r=i.getComponent(sp.Skeleton);r.setCompleteListener(this.onAnimCompleted.bind(this,i)),e?(i.setScale(n),r.setAnimation(0,"spilling_water",!1)):r.setAnimation(0,"bubble",!1)},e.prototype.onAnimCompleted=function(t){t.removeFromParent()},e.prototype.onDestroy=function(){c.default.instance.unregisterTarget(this)},e.EVT_SPAW_BUBBLE="spaw-bubble",i([l(cc.Prefab)],e.prototype,"bubbleWaterPrefab",void 0),e=n=i([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../core/event-manager":"event-manager","../../core/loader":"loader"}],"collider-def":[function(t,e,n){"use strict";cc._RF.push(e,"ae925YujE1JUYOTtjZC0lmT","collider-def"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.TADPOLE=1]="TADPOLE",t[t.ENEMY=2]="ENEMY",t[t.CONTROL=3]="CONTROL",t[t.OBSTACLE=4]="OBSTACLE"}(n.CollidGroup||(n.CollidGroup={})),function(t){t[t.CONTROL=0]="CONTROL",t[t.LEAF=1]="LEAF"}(n.CollidTag||(n.CollidTag={})),cc._RF.pop()},{}],config:[function(t,e,n){"use strict";cc._RF.push(e,"c40dbVkwulCgaxnZg5s0ilJ","config"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.PROJECT_ID="raise-tadpoles",t.PROJECT_VERSION="1.0.0",t}();n.default=o,cc._RF.pop()},{}],control:[function(t,e,n){"use strict";cc._RF.push(e,"1d3bbTn1QpAJYi+l3dt4cHy","control");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./components/bubble-controller"),c=t("../core/event-manager"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchDisplay=null,e.root=null,e}return o(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this)},e.prototype.onTouch=function(t){var e=cc.instantiate(this.touchDisplay),n=t.getLocation();c.default.instance.dispatch(r.default.EVT_SPAW_BUBBLE,n),e.setPosition(this.root.convertToNodeSpaceAR(n)),this.root.addChild(e),this.scheduleOnce(function(){e.removeFromParent()},.2)},i([l(cc.Prefab)],e.prototype,"touchDisplay",void 0),i([l(cc.Node)],e.prototype,"root",void 0),e=i([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../core/event-manager":"event-manager","./components/bubble-controller":"bubble-controller"}],ech:[function(t,e,n){"use strict";cc._RF.push(e,"c3f668k4NlFkIrzRvwrgYge","ech");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/event-manager"),c=t("./enemy"),s=t("./nong-noc"),a=t("../../utils"),l=t("../path/vpath"),u=t("./sen"),p=t("./bubble-controller"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.waitTime=0,e.targetJumpAngle=0,e.jumpping=!1,e}return o(e,t),e.prototype.init=function(){return this.type=c.EnemyType.FROG,this.animationName[c.EnemyAnimID.SWIMMING]="frog_idle",this.animationName[c.EnemyAnimID.STURN]="frog_stun",this.animationName[c.EnemyAnimID.EAT_TADPOLES]="frog_eat_tadpoles",this.playAnim(this.animationName[c.EnemyAnimID.SWIMMING],!0),!0},e.prototype.eatTadpoles=function(t){var e=this;this.setState(c.EState.EATEN),this.playAnim("frog_rotate_angle",!1),this.rotateToTarget(t),this.node.runAction(cc.sequence(cc.callFunc(function(){e.node.angle=e.direction-90}),cc.delayTime(.6),cc.callFunc(function(){e.playAnim(e.animationName[c.EnemyAnimID.EAT_TADPOLES],!1),e.spineAnim.setCompleteListener(function(){e.spineAnim.setCompleteListener(a.empty_func),t.getComponent(s.default).death(),r.default.instance.dispatch(s.default.EVT_DEATH),t.removeFromParent(),e.playAnim(e.animationName[c.EnemyAnimID.SWIMMING],!0),e.setState(c.EState.NORMAL)})})))},e.prototype.updateMovePath=function(t){if(this.movePath&&(this.waitTime+=t,this.waitTime>this.movePath.getAttachData(this.movePath.currentPointIdx).fogDelay)){this.setState(c.EState.JUMP),this.activeColliders=!1,this.waitTime=0;var e={},n=this.movePath.getNextPoint(e);if(this.targetJump=this.node.parent.convertToNodeSpaceAR(n),this.targetJumpAngle=a.Utils.getAngleDeg(this.node.position,this.targetJump),this.movePath.pathLoopType==l.PathLoopType.START&&1==e.endPath)return this.node.setPosition(this.node.parent.convertToNodeSpaceAR(n)),void this.setState(c.EState.NORMAL);a.Utils.deltaAngle(this.targetJumpAngle,this.direction)>=3&&(this.playAnim("frog_rotate_angle",!1),this.nextDirection=this.targetJumpAngle,this.isUpdatingDirection=!0)}},e.prototype.updateJumpState=function(t){var e=this;this.jumpping||(this.rotate2NewDirection(t),a.Utils.deltaAngle(this.targetJumpAngle,this.direction)<5&&(this.jumpping=!0,this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e.playAnim("frog_jump",!1)}),cc.moveTo(.5,this.targetJump),cc.callFunc(function(){r.default.instance.dispatch(u.default.EVT_RUNG_RINH,e.node.parent.convertToWorldSpaceAR(e.targetJump))}),cc.delayTime(.05),cc.callFunc(function(){e.playAnim(e.animationName[c.EnemyAnimID.SWIMMING],!0),e.setState(c.EState.NORMAL),e.activeColliders=!0,e.jumpping=!1}))),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){r.default.instance.dispatch(p.default.EVT_SPAW_BUBBLE,e.node.parent.convertToWorldSpaceAR(e.targetJump),!0,1.2)})))))},e.prototype.updateAttackState=function(t){this.attackTimeCount+=t;var e=this.node.parent.convertToNodeSpaceAR(this.attackTarget.convertToWorldSpaceAR(cc.Vec2.ZERO)),n=a.Utils.getAngleDeg(this.node.position,e),o=!0;a.Utils.deltaAngle(n,this.direction)>5&&(this.nextDirection=n,this.isUpdatingDirection=!0,this.rotate2NewDirection(t),this.updateMove(t),this.playAnim("frog_rotate_angle",!1),o=!1),o&&this.setState(c.EState.NORMAL),this.attackTimeCount>=this.attackTime&&(cc.log("attack time over"),this.setState(c.EState.NORMAL))},e.prototype.updateMove=function(t){this.node.angle=this.direction-90},e.prototype.update=function(e){this.paused||(t.prototype.update.call(this,e),this.state==c.EState.JUMP&&(this.updateJumpState(e),this.updateMove(e)))},e.prototype.rotate2NewDirection=function(t){if(this.isUpdatingDirection){if(a.Utils.deltaAngle(this.direction,this.nextDirection)<2)return void(this.isUpdatingDirection=!1);var e=Math.abs(this.direction-this.nextDirection)<180?1:-1;this.direction<this.nextDirection?(this.direction+=360*e*t,this.direction>this.nextDirection&&(this.direction=this.nextDirection)):(this.direction-=360*e*t,this.direction<this.nextDirection&&(this.direction=this.nextDirection)),this.direction<0?this.direction+=360:this.direction>360&&(this.direction-=360)}},e=i([h],e)}(c.default));n.default=f,cc._RF.pop()},{"../../core/event-manager":"event-manager","../../utils":"utils","../path/vpath":"vpath","./bubble-controller":"bubble-controller","./enemy":"enemy","./nong-noc":"nong-noc","./sen":"sen"}],enemy:[function(t,e,n){"use strict";cc._RF.push(e,"b1a21cFVUtEHrBYIivx+bnL","enemy");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r,c,s,a=t("../collider-def"),l=t("./bubble-controller"),u=t("../../core/event-manager"),p=t("../../core/loader"),d=t("../../utils"),h=t("./nong-noc"),f=t("../path/vpath"),g=cc._decorator,y=g.ccclass,m=g.property;(function(t){t[t.INIT=0]="INIT",t[t.NORMAL=1]="NORMAL",t[t.ATTACK=2]="ATTACK",t[t.EATEN=3]="EATEN",t[t.FREZZE=4]="FREZZE",t[t.JUMP=5]="JUMP"})(r=n.EState||(n.EState={})),function(t){t[t.FROG=0]="FROG",t[t.SNAKE=1]="SNAKE",t[t.CATBEAR=2]="CATBEAR",t[t.TURTLE=3]="TURTLE"}(c=n.EnemyType||(n.EnemyType={})),function(t){t[t.SWIMMING=0]="SWIMMING",t[t.EAT_TADPOLES=1]="EAT_TADPOLES",t[t.STURN=2]="STURN"}(s=n.EnemyAnimID||(n.EnemyAnimID={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=15,e.spineAnim=null,e.movePath=null,e.attackSpeed=50,e.rigidbody=null,e.direction=0,e.leftBound=-320,e.rightBound=-320,e.topBound=640,e.bottomBound=-640,e.isUpdatingDirection=!1,e.nextDirection=-1,e.rotateAcceleration=20,e.hitCount=0,e.freezeTime=8,e.freezeTimeEclapse=0,e.state=r.INIT,e.animationName=[],e.type=c.FROG,e.paused=!1,e.inSightTargets=[],e.attackTarget=null,e.attackTime=3,e.attackTimeCount=0,e.isReturnToPath=!1,e.returnPathPoint=null,e.rotationCorrect=!1,e.head=null,e._prev_anim_name=null,e}return o(e,t),e.prototype.start=function(){var t=this;if(p.default.loaded){this.node.parent.zIndex=1e3;var e=cc.view.getVisibleSize();this.leftBound=-100,this.rightBound=e.width+100,this.topBound=e.height,this.bottomBound=-100,this.rigidbody=this.getComponent(cc.RigidBody),this.head=this.node.getChildByName("head"),u.default.instance.register("game-start",function(){t.setState(r.NORMAL),t.init(),t.movePath?(t.node.setPosition(t.node.parent.convertToNodeSpaceAR(t.movePath.getStartPos())),t.direction=t.movePath.getStartAngle(),t.movePath.setReferSpeed(t.speed)):t.direction=t.node.angle+90,t.type!=c.FROG&&t.schedule(t.spawBubleAnim,3)},this),u.default.instance.register("game-pause",function(){t.paused=!0,t.spineAnim.paused=!0,cc.director.getScheduler().pauseTarget(t),cc.director.getActionManager().pauseTarget(t.node)},this),u.default.instance.register("game-resume",function(){t.paused=!1,t.spineAnim.paused=!1,cc.director.getScheduler().resumeTarget(t),cc.director.getActionManager().resumeTarget(t.node)},this)}},e.prototype.spawBubleAnim=function(t){this.state!=r.FREZZE&&u.default.instance.dispatch(l.default.EVT_SPAW_BUBBLE,this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),!0)},e.prototype.setState=function(t){t!=this.state&&(t==r.ATTACK?(cc.log("ATTACK state active"),this.attackTimeCount=0,this.isReturnToPath=!0):t==r.NORMAL&&this.playAnim(this.animationName[s.SWIMMING],!0),this.state=t)},e.prototype.update=function(t){this.paused||(this.state==r.NORMAL?(this.computeTargeToAttack()&&this.setState(r.ATTACK),this.updateMovePath(t),this.rotate2NewDirection(t),this.updateMove(t),!this.isOutOfView()||this.isUpdatingDirection||this.movePath||(this.nextDirection=this.direction+d.Utils.randomRange(120,180),this.rigidbody.linearVelocity=cc.Vec2.ZERO,this.isUpdatingDirection=!0),this.hitCount>0&&(this.hitCount-=4*t)):this.state==r.FREZZE?this.updateFreezeState(t):this.state==r.ATTACK&&this.updateAttackState(t))},e.prototype.updateMove=function(t){var e=this.state==r.NORMAL?this.speed:this.attackSpeed,n=cc.misc.degreesToRadians(this.direction),o=Math.cos(n)*e,i=Math.sin(n)*e;this.node.angle=this.direction-90,this.rotationCorrect?this.rigidbody.linearVelocity=cc.Vec2.ZERO:this.rigidbody.linearVelocity=cc.v2(o,i)},e.prototype.updateFreezeState=function(t){this.freezeTimeEclapse-=t,this.freezeTimeEclapse<=0&&(this.hitCount=0,this.setState(r.NORMAL),this.type==c.FROG?this.playAnim("frog_jump",!0):this.playAnim(this.animationName[s.SWIMMING],!0))},e.prototype.updateAttackState=function(t){this.attackTimeCount+=t;var e=this.node.parent.convertToNodeSpaceAR(this.attackTarget.convertToWorldSpaceAR(cc.Vec2.ZERO)),n=d.Utils.getAngleDeg(this.node.position,e),o=!0;e.sub(this.node.position).mag()>15?(this.updateMove(t),o=!1):this.rigidbody.linearVelocity=cc.Vec2.ZERO,d.Utils.deltaAngle(n,this.direction)>5&&(this.nextDirection=n,this.isUpdatingDirection=!0,this.rotate2NewDirection(t),o=!1),o&&this.setState(r.NORMAL),this.attackTimeCount>=this.attackTime&&this.setState(r.NORMAL)},e.prototype.updateMovePath=function(t){if(this.movePath){var e=void 0;if(this.isReturnToPath&&null==this.returnPathPoint){var n=this.head?this.head.convertToWorldSpaceAR(cc.Vec2.ZERO):null;e=this.movePath.getReturnTarget(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),n),this.returnPathPoint=this.node.parent.convertToNodeSpaceAR(e),this.isReturnToPath=!1}else{var o={};if(e=this.movePath.getTarget(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o),this.movePath.pathLoopType==f.PathLoopType.START&&1==o.endPath)return void this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))}e=this.node.parent.convertToNodeSpaceAR(e);var i=d.Utils.getAngleDeg(this.node.position,e);this.nextDirection=i,this.isUpdatingDirection=!0,this.returnPathPoint&&this.returnPathPoint.sub(this.node.position).magSqr()<25&&(this.returnPathPoint=null)}},e.prototype.isOutOfView=function(){var t=this.node.x,e=this.node.y;return!(t>this.leftBound&&t<this.rightBound&&e>this.bottomBound&&e<this.topBound)},e.prototype.rotate2NewDirection=function(t){if(this.isUpdatingDirection){var e=d.Utils.deltaAngle(this.direction,this.nextDirection);if(e<3)return void(this.isUpdatingDirection=!1);var n=this.state==r.NORMAL?this.rotateAcceleration:2.5*this.rotateAcceleration;this.rotationCorrect=e>30;var o=Math.abs(this.direction-this.nextDirection)<180?1:-1;this.direction<this.nextDirection?this.direction+=o*n*t:this.direction-=o*n*t,this.direction<0?this.direction+=360:this.direction>360&&(this.direction-=360)}},e.prototype.rotateToTarget=function(t){var e=t.parent.convertToWorldSpaceAR(t.position),n=this.node.parent.convertToNodeSpaceAR(e),o=d.Utils.getAngleDeg(this.node.position,n);cc.log("rotate to: "+o),this.direction=o},e.prototype.canEat=function(){return this.state!=r.FREZZE},e.prototype.eatTadpoles=function(t){var e=this;this.setState(r.EATEN),cc.log("-- eatTadpoles-1"),this.rotateToTarget(t),this.playAnim(this.animationName[s.EAT_TADPOLES],!1),this.spineAnim.setCompleteListener(function(){t.getComponent(h.default).death(),e.spineAnim.setCompleteListener(d.empty_func),e.playAnim(e.animationName[s.SWIMMING],!0),e.setState(r.NORMAL)})},e.prototype.onBeginContact=function(t,e,n){p.default.loaded&&(n.node.groupIndex==a.CollidGroup.TADPOLE?1==e.tag?this.inSightTargets.indexOf(n.node)<0&&this.inSightTargets.push(n.node):2==e.tag&&this.state!=r.EATEN&&this.eatTadpoles(n.node):n.node.groupIndex==a.CollidGroup.OBSTACLE?this.type!=c.FROG?this.movePath||(this.nextDirection=this.direction+90,this.isUpdatingDirection=!0,this.rigidbody.linearVelocity=cc.Vec2.ZERO):t.disabled=!0:n.node.groupIndex==a.CollidGroup.CONTROL&&n.tag==a.CollidTag.CONTROL&&0==e.tag&&(this.hitCount+=1,this.hitCount>=2&&(this.setState(r.FREZZE),this.freezeTimeEclapse=this.freezeTime,this.rigidbody.linearVelocity=cc.Vec2.ZERO,this.playAnim(this.animationName[s.STURN],!0))))},e.prototype.onEndContact=function(t,e,n){if(p.default.loaded&&n.node.groupIndex==a.CollidGroup.TADPOLE&&1==e.tag){var o=this.inSightTargets.indexOf(n.node);o>=0&&this.inSightTargets.splice(o,1)}},e.prototype.computeTargeToAttack=function(){var t=this;if(1==this.inSightTargets.length)return this.attackTarget=this.inSightTargets[0],!0;if(this.inSightTargets.length>1){var e=180,n=-1;if(this.inSightTargets.forEach(function(o,i){var r=d.Utils.getAngleDeg(t.node.position,t.node.parent.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),c=d.Utils.deltaAngle(t.direction,r);c<e&&(e=c,n=i)}),-1!=n)return this.attackTarget=this.inSightTargets[n],!0}return!1},e.prototype.playAnim=function(t,e,n){void 0===n&&(n=1),t!=this._prev_anim_name&&""!=t&&(this._prev_anim_name=t,this.spineAnim.timeScale=n,this.spineAnim.setAnimation(0,t,e))},Object.defineProperty(e.prototype,"activeColliders",{set:function(t){this.getComponents(cc.PhysicsCollider).forEach(function(e){e.enabled=t})},enumerable:!0,configurable:!0}),e.prototype.onDestroy=function(){this.unschedule(this.spawBubleAnim),this.unscheduleAllCallbacks(),u.default.instance.unregisterTarget(this)},i([m()],e.prototype,"speed",void 0),i([m(sp.Skeleton)],e.prototype,"spineAnim",void 0),i([m(f.default)],e.prototype,"movePath",void 0),e=i([y],e)}(cc.Component);n.default=b,cc._RF.pop()},{"../../core/event-manager":"event-manager","../../core/loader":"loader","../../utils":"utils","../collider-def":"collider-def","../path/vpath":"vpath","./bubble-controller":"bubble-controller","./nong-noc":"nong-noc"}],"event-manager":[function(t,e,n){"use strict";cc._RF.push(e,"f534eiXgTxDaIAsHCAjGshJ","event-manager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.eventListenners={}}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(t,e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=0),void 0===i&&(i=!1);var r={target:n,callback:e,priority:o,excuteOnce:i};return this.eventListenners[t]?this.eventListenners[t].push(r):(this.eventListenners[t]=[],this.eventListenners[t].push(r)),this.eventListenners[t].sort(function(t,e){return e.priority-t.priority}),e},t.prototype.registerOnce=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=0),this.register(t,e,n,o,!0)},t.prototype.unregister=function(t,e,n){if(void 0===n&&(n=null),this.eventListenners[t]){for(var o=[],i=0;i<this.eventListenners[t].length;i++){var r=this.eventListenners[t][i];null==e?r.target==n&&o.push(i):r.target==n&&r.callback==e&&o.push(i)}this.eventListenners[t]=this.eventListenners[t].filter(function(t,e){return-1===o.indexOf(e)}),0==this.eventListenners[t].length&&delete this.eventListenners[t]}},t.prototype.unregisterTarget=function(t){var e=function(e){for(var o=[],i=0;i<n.eventListenners[e].length;i++){n.eventListenners[e][i].target==t&&o.push(i)}n.eventListenners[e]=n.eventListenners[e].filter(function(t,e){return-1===o.indexOf(e)}),0==n.eventListenners[e].length&&delete n.eventListenners[e]},n=this;for(var o in this.eventListenners)e(o)},t.prototype.remove=function(t){this.eventListenners[t]&&delete this.eventListenners[t]},t.prototype.dispatch=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(this.eventListenners[t]){var i=[];this.eventListenners[t].forEach(function(t){t.target?t.callback.call(t.target,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]):t.callback(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]),1==t.excuteOnce&&i.push(t)}),i.forEach(function(n){e.unregister(t,n.callback,n.target)})}},t._instance=null,t}();n.default=o,cc._RF.pop()},{}],facebook:[function(t,e,n){"use strict";cc._RF.push(e,"36005g6kjtORaYhgZESZpGk","facebook"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.init=function(){cc.sys.isMobile&&(this.listener=new i,sdkbox.PluginFacebook.setListener(this.listener),sdkbox.PluginFacebook.init())},t.setLoginBehavior=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.setLoginBehavior(t)},t.login=function(t){void 0===t&&(t=null),t?cc.sys.isMobile&&sdkbox.PluginFacebook.login(t):cc.sys.isMobile&&sdkbox.PluginFacebook.login()},t.logout=function(){cc.sys.isMobile&&sdkbox.PluginFacebook.logout()},t.isLoggedIn=function(){if(cc.sys.isMobile)return sdkbox.PluginFacebook.isLoggedIn()},t.requestReadPermissions=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.requestReadPermissions(t)},t.requestPublishPermissions=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.requestPublishPermissions(t)},t.getPermissionList=function(){if(cc.sys.isMobile)return sdkbox.PluginFacebook.getPermissionList()},t.getUserID=function(){if(cc.sys.isMobile)return sdkbox.PluginFacebook.getUserID()},t.getAccessToken=function(){if(cc.sys.isMobile)return sdkbox.PluginFacebook.getAccessToken()},t.setAppId=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.setAppId(t)},t.setAppURLSchemeSuffix=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.setAppURLSchemeSuffix(t)},t.share=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.share(t)},t.dialog=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.dialog(t)},t.api=function(t,e,n,o){cc.sys.isMobile&&sdkbox.PluginFacebook.api(t,e,n,o)},t.getSDKVersion=function(){if(cc.sys.isMobile)return sdkbox.PluginFacebook.getSDKVersion()},t.fetchFriends=function(){cc.sys.isMobile&&sdkbox.PluginFacebook.fetchFriends()},t.canPresentWithFBApp=function(t){if(cc.sys.isMobile)return sdkbox.PluginFacebook.canPresentWithFBApp(t)},t.inviteFriends=function(t,e){cc.sys.isMobile&&sdkbox.PluginFacebook.inviteFriends(t,e)},t.requestGift=function(t,e,n,o,i){cc.sys.isMobile&&sdkbox.PluginFacebook.requestGift(t,e,n,o,i)},t.sendGift=function(t,e,n,o,i){cc.sys.isMobile&&sdkbox.PluginFacebook.sendGift(t,e,n,o,i)},t.logEvent=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.logEvent(t)},t.logPurchase=function(t,e){cc.sys.isMobile&&sdkbox.PluginFacebook.logPurchase(t,e)},t.setListener=function(t){cc.sys.isMobile&&sdkbox.PluginFacebook.setListener(t)},t}();n.FaceBook=o;var i=function(){function t(){}return t.prototype.onLogin=function(t,e){cc.log("onLogin isLogin: "+t+" message: "+e)},t.prototype.onSharedSuccess=function(t){cc.log("onSharedSuccess message: "+t)},t.prototype.onSharedFailed=function(t){cc.log("onSharedFailed message: "+t)},t.prototype.onSharedCancel=function(){cc.log("onSharedCancel")},t.prototype.onAPI=function(t,e){cc.log("onAPI key: "+t+" data: "+e)},t.prototype.onPermission=function(t,e){cc.log("onPermission isLogin: "+t+" msg: "+e)},t.prototype.onFetchFriends=function(t,e){cc.log("onFetchFriends ok: "+t+" msg: "+e)},t.prototype.onRequestInvitableFriends=function(t){cc.log("onRequestInvitableFriends friends: "+t)},t.prototype.onInviteFriendsWithInviteIdsResult=function(t,e){cc.log("onInviteFriendsWithInviteIdsResult result: "+t+" msg: "+e)},t.prototype.onInviteFriendsResult=function(t,e){cc.log("onInviteFriendsResult result: "+t+" msg: "+e)},t.prototype.onGetUserInfo=function(t){cc.log("onGetUserInfo result: "+t)},t.prototype.onRequestGiftResult=function(t,e){cc.log("onRequestGiftResult result: "+t+" msg: "+e)},t.prototype.onSendGiftResult=function(t,e){cc.log("onSendGiftResult result: "+t+" msg: "+e)},t}();cc._RF.pop()},{}],food:[function(t,e,n){"use strict";cc._RF.push(e,"c49a0JmjihM1JJJkpirjI3O","food");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../utils"),c=t("../../core/loader"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spineAnim=null,e.DROP_ANIM="drop_food_1",e.IDLE_ANIM="food_idle_1",e}return o(e,t),e.prototype.start=function(){var t=this;c.default.loaded&&(this.spineAnim.setAnimation(0,this.DROP_ANIM,!1),this.spineAnim.setCompleteListener(function(){t.spineAnim.setAnimation(0,t.IDLE_ANIM,!0),t.spineAnim.setCompleteListener(r.empty_func)}))},i([l(sp.Skeleton)],e.prototype,"spineAnim",void 0),e=i([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../core/loader":"loader","../../utils":"utils"}],game:[function(t,e,n){"use strict";cc._RF.push(e,"d7d6cDiflJKrIlcEqSg37sF","game");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../sdkbox-wrapper/analytics"),c=t("./components/level"),s=t("../core/event-manager"),a=t("./components/nong-noc"),l=t("../core/popup"),u=t("../core/loader"),p=t("../utils"),d=t("../player-ref"),h=t("./spawner"),f=t("./menu/life-control"),g=cc._decorator,y=g.ccclass,m=g.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameRoot=null,e.nongNocPrefab=null,e.snakePrefab=null,e.turtlePrefab=null,e.catPrefab=null,e.frogPrefab=null,e.totalNongNocDeath=0,e.totalNongNocLost=0,e.totalNongNocGoal=0,e.foodRoot=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(),this.foodRoot=this.gameRoot.getChildByName("foods"),this.foodRoot.active=!1,s.default.instance.register("game-pause",function(){cc.director.getScheduler().pauseTarget(t),cc.director.getPhysicsManager().enabled=!1},this),s.default.instance.register("game-resume",function(){cc.director.getScheduler().resumeTarget(t),cc.director.getPhysicsManager().enabled=!0},this),s.default.instance.register("win-now",function(){l.default.instance.showWinPopup(c.default.Instance.starCollected(t.totalNongNocGoal),c.default.Instance.getTotalScore(),t.onClickNext.bind(t))},this)},e.prototype.start=function(){var t=this;if(u.default.loaded){c.default.Instance.getTotalStar();c.default.Instance.init(),l.default.instance.showInfoPopup("Level "+c.default.Instance.currentLvl.toString()+"\n\n feed "+c.default.Instance.numOffTadpoles2Pass()+" tadpoles \n for next level",function(){t.init(),t.getComponent(h.default).startSpawn(t.nongNocPrefab,t.gameRoot),t.foodRoot.active=!0})}},e.prototype.init=function(){var t=this;this.totalNongNocDeath=0,this.totalNongNocLost=0,this.totalNongNocGoal=0,cc.log("game start"),s.default.instance.dispatch("game-start"),r.Analytics.setScreenName("Gameplay"),r.Analytics.logEvent("LevelStart",{levelId:c.default.Instance.currentLvl.toString()}),s.default.instance.register(a.default.EVT_DEATH,function(){t.totalNongNocDeath++,t.checkEndGame()},this),s.default.instance.register(a.default.EVT_ESCAPE,function(){t.totalNongNocLost++,t.checkEndGame()},this),s.default.instance.register(a.default.EVT_GOAL,function(){t.totalNongNocGoal++,c.default.Instance.addGameScore(t.totalNongNocGoal),t.checkEndGame()},this)},e.prototype.checkEndGame=function(){if(this.totalNongNocDeath+this.totalNongNocLost+this.totalNongNocGoal>=c.default.Instance.totalNongNoc){if(this.totalNongNocGoal>=c.default.Instance.numOffTadpoles2Pass())l.default.instance.showWinPopup(c.default.Instance.starCollected(this.totalNongNocGoal),c.default.Instance.getTotalScore(),this.onClickNext.bind(this)),d.default.current.unlockLevel(c.default.Instance.currentLvl,c.default.Instance.starCollected(this.totalNongNocGoal)),r.Analytics.logEvent("LevelEnd",{levelId:c.default.Instance.currentLvl.toString(),result:"Win",score:c.default.Instance.starCollected(this.totalNongNocGoal).toString()});else{c.default.Instance.getTotalStar();l.default.instance.showConfirmPopup("OOP !!! \n\n You need more effort","Play","Quit",this.onClickTryAgain.bind(this),this.onClickCancel.bind(this)),r.Analytics.logEvent("LevelEnd",{levelId:c.default.Instance.currentLvl.toString(),result:"Lose",score:c.default.Instance.starCollected(this.totalNongNocGoal).toString()})}s.default.instance.dispatch("game-pause")}},e.prototype.onClickNext=function(){c.default.Instance.currentLvl++,this.reLoadScene()},e.prototype.onClickTryAgain=function(){if(!(d.default.current.life>0))return s.default.instance.dispatch(f.default.EVT_LIFE_REQUIRE),!0;d.default.current.life--,s.default.instance.dispatch(f.default.EVT_LIFE_CHANGE),this.reLoadScene()},e.prototype.onClickCancel=function(){cc.director.loadScene("main-menu")},e.prototype.reLoadScene=function(){s.default.instance.unregisterTarget(this),cc.director.loadScene("level_"+p.Utils.zeropad(c.default.Instance.currentLvl,3))},e.prototype.onDestroy=function(){s.default.instance.unregisterTarget(this),d.default.current.saveAll()},i([m(cc.Node)],e.prototype,"gameRoot",void 0),i([m(cc.Prefab)],e.prototype,"nongNocPrefab",void 0),i([m(cc.Prefab)],e.prototype,"snakePrefab",void 0),i([m(cc.Prefab)],e.prototype,"turtlePrefab",void 0),i([m(cc.Prefab)],e.prototype,"catPrefab",void 0),i([m(cc.Prefab)],e.prototype,"frogPrefab",void 0),e=i([y],e)}(cc.Component);n.default=b,cc._RF.pop()},{"../core/event-manager":"event-manager","../core/loader":"loader","../core/popup":"popup","../player-ref":"player-ref","../sdkbox-wrapper/analytics":"analytics","../utils":"utils","./components/level":"level","./components/nong-noc":"nong-noc","./menu/life-control":"life-control","./spawner":"spawner"}],gaumeo:[function(t,e,n){"use strict";cc._RF.push(e,"762b6xtMUZJXZpau6Go8Onm","gaumeo");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./enemy"),c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){return this.type=r.EnemyType.CATBEAR,this.animationName[r.EnemyAnimID.SWIMMING]="catbear_swiming",this.animationName[r.EnemyAnimID.STURN]="catbear_stun",this.animationName[r.EnemyAnimID.EAT_TADPOLES]="catbear_eat_tadpoles",this.playAnim(this.animationName[r.EnemyAnimID.SWIMMING],!0),!0},e=i([s],e)}(r.default));n.default=a,cc._RF.pop()},{"./enemy":"enemy"}],"global-var":[function(t,e,n){"use strict";cc._RF.push(e,"22818LLQ/hCwo3neiua+cIu","global-var"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._vars={}}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){this._vars[t]=e},t.prototype.get=function(t,e){void 0===e&&(e=!1);var n=this._vars[t];return n&&e&&delete this._vars[t],n},t}();n.default=o,cc._RF.pop()},{}],i18n:[function(t,e,n){"use strict";cc._RF.push(e,"cb41b4cbx9AcpIzAaOE+6ZV","i18n"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={});var o=t("polyglot"),i=window.i18n.supported_languages||[],r=cc.sys.localStorage.getItem("__gamesave-language"),c="";null==r?(c=cc.sys.language,i.length>0&&-1==i.indexOf(c)&&(c=i[0],cc.sys.localStorage.setItem("__gamesave-language",c))):c=r;var s=window.i18n.languages[c]||{},a=new o({phrases:s,allowMissing:!0});e.exports={init:function(t){return window.i18n.languages[t]?(window.i18n.languages[t]&&cc.sys.localStorage.setItem("__gamesave-language",t),c=t,s=window.i18n.languages[c]||{},a.replace(s),!0):(console.warn("Language is not support: "+t),!1)},getSaveLang:function(){return cc.sys.localStorage.getItem("__gamesave-language")},t:function(t,e){return a.t(t,e)}},cc._RF.pop()},{polyglot:"polyglot"}],"iap-def":[function(t,e,n){"use strict";cc._RF.push(e,"f1c94HENslJXpceYCKQ0V1V","iap-def"),Object.defineProperty(n,"__esModule",{value:!0}),n.IAP_PRODUCTS={"anbachcorp.android.raisethetadpole.topup1":3,"anbachcorp.android.raisethetadpole.topup2":30},cc._RF.pop()},{}],iap:[function(t,e,n){"use strict";cc._RF.push(e,"fd2d23erX5DoZQTcn3I9Q2m","iap"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../core/event-manager"),i=function(){function t(){}return t.init=function(t){cc.sys.isMobile&&(this.listener=new r,this.setListener(this.listener),sdkbox.IAP.init(t))},t.setDebug=function(t){cc.sys.isMobile&&sdkbox.IAP.setDebug(t)},t.purchase=function(t){cc.sys.isMobile&&sdkbox.IAP.purchase(t)},t.refresh=function(){cc.sys.isMobile&&sdkbox.IAP.refresh()},t.restore=function(){cc.sys.isMobile&&sdkbox.IAP.restore()},t.enableUserSideVerification=function(t){cc.sys.isMobile&&sdkbox.IAP.enableUserSideVerification(t)},t.isAutoFinishTransaction=function(){if(cc.sys.isMobile)return sdkbox.IAP.isAutoFinishTransaction()},t.setAutoFinishTransaction=function(t){cc.sys.isMobile&&sdkbox.IAP.setAutoFinishTransaction(t)},t.finishTransaction=function(t){cc.sys.isMobile&&sdkbox.IAP.finishTransaction(t)},t.fetchStorePromotionOrder=function(){cc.sys.isMobile&&sdkbox.IAP.fetchStorePromotionOrder()},t.updateStorePromotionOrder=function(t){cc.sys.isMobile&&sdkbox.IAP.updateStorePromotionOrder(t)},t.fetchStorePromotionVisibility=function(t){cc.sys.isMobile&&sdkbox.IAP.fetchStorePromotionVisibility(t)},t.updateStorePromotionVisibility=function(t,e){cc.sys.isMobile&&sdkbox.IAP.updateStorePromotionVisibility(t,e)},t.getPurchaseHistory=function(){cc.sys.isMobile&&sdkbox.IAP.getPurchaseHistory()},t.getInitializedErrMsg=function(){if(cc.sys.isMobile)return sdkbox.IAP.getInitializedErrMsg()},t.requestUpdateTransaction=function(){cc.sys.isMobile&&sdkbox.IAP.requestUpdateTransaction()},t.setListener=function(t){cc.sys.isMobile&&sdkbox.IAP.setListener(t)},t.removeListener=function(){cc.sys.isMobile&&sdkbox.IAP.removeListener()},t.EVT_BUY_SUCCESS="iap-success",t.EVT_BUY_FAILED="iap-failed",t}();n.IAP=i;var r=function(){function t(){}return t.prototype.onInitialized=function(t){cc.log("iap onInitialized: "+t)},t.prototype.onSuccess=function(t){cc.log("iap success"),o.default.instance.dispatch(i.EVT_BUY_SUCCESS,t)},t.prototype.onFailure=function(t,e){cc.log("iap failed"),o.default.instance.dispatch(i.EVT_BUY_FAILED,t,e)},t.prototype.onCanceled=function(t){cc.log("iap cancel: "+t)},t.prototype.onRestored=function(t){cc.log("iap restored: "+t)},t.prototype.onProductRequestSuccess=function(t){cc.log("iap product request success: "+JSON.stringify(t))},t.prototype.onProductRequestFailure=function(t){cc.log("iap product request failed: "+t)},t.prototype.onRestoreComplete=function(t,e){cc.log("iap restore complete: "+t+"msg: "+e)},t.prototype.onShouldAddStorePayment=function(t){cc.log("iap should add store payment: "+t)},t.prototype.onFetchStorePromotionOrder=function(t,e){cc.log("iap fetch store promotion order: "+t+" error: "+e)},t.prototype.onFetchStorePromotionVisibility=function(t,e,n){cc.log("iap fetch store promotion visibility: "+t+" visibility: "+e+" error: "+n)},t.prototype.onUpdateStorePromotionOrder=function(t){cc.log("iap update store promotion order: "+t)},t.prototype.onUpdateStorePromotionVisibility=function(t){cc.log("iap update store promotion visibility: "+t)},t.prototype.onPurchaseHistory=function(t){cc.log("iap purchase history: "+t)},t.prototype.onConsumed=function(t,e){cc.log("iap on consumed: "+t+" error: "+e)},t.prototype.onDeferred=function(t){cc.log("iap deferred: "+t)},t}();cc._RF.pop()},{"../core/event-manager":"event-manager"}],"level-select-item":[function(t,e,n){"use strict";cc._RF.push(e,"fa473S/lDFFhpZYJWaJoNO6","level-select-item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockSprite=null,e.unlockSprite=null,e.star=[],e.lblName=null,e._levelId=0,e}return o(e,t),e.prototype.init=function(t,e,n,o){var i=this;this._levelId=t,this.lblName.string=t.toString();var r=this.getComponent(cc.Button);n?this.unlock(e):this.lock(),r.node.on("click",function(){o&&o(i._levelId)})},e.prototype.lock=function(){this.getComponent(cc.Button).interactable=!1,this.lockSprite.active=!0,this.unlockSprite.active=!1,this.lblName.node.color=new cc.Color(242,242,242)},e.prototype.unlock=function(t){this.getComponent(cc.Button).interactable=!0,this.unlockSprite.active=!0,this.lockSprite.active=!1,t>0&&t<4&&(this.star[t-1].active=!0),this.lblName.node.color=new cc.Color(146,234,64)},i([s(cc.Node)],e.prototype,"lockSprite",void 0),i([s(cc.Node)],e.prototype,"unlockSprite",void 0),i([s([cc.Node])],e.prototype,"star",void 0),i([s(cc.Label)],e.prototype,"lblName",void 0),e=i([c],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],level:[function(t,e,n){"use strict";cc._RF.push(e,"cdc85TTB+dDxp8e635otRq9","level");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../core/event-manager"),r=cc._decorator,c=r.ccclass,s=(r.property,function(){function t(){this.currentLvl=1,this.totalNongNoc=0,this.stars=[],this.scoresMultiply=[],this.lvlTotalScore=0,this.currentStarIndex=0,this.minTadpoles2NextLevel=1e3}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return null==e._levelInstance&&(e._levelInstance=new e),e._levelInstance},enumerable:!0,configurable:!0}),t.load=function(){e.isLoad||cc.loader.loadRes("maps/maps",cc.JsonAsset,function(t,n){e._jsonContent=n.json,e.Instance.init(),e.isLoad=!0,i.default.instance.dispatch("Level_initialized")})},t.prototype.init=function(){this.lvlTotalScore=0;var t=e._jsonContent["Level"+this.currentLvl];this.totalNongNoc=t.tadpoles,this.stars=t.star,this.minTadpoles2NextLevel=t.next_level,this.scoresMultiply=t.score},t.prototype.spawnObject=function(t,e,n,o){var i=cc.instantiate(e);i.setPosition(n,o),t.addChild(i)},t.prototype.calculateNongNocScore=function(t){return 0==t?0:t<=this.stars[0]?10:t<=this.stars[1]?20:30},t.prototype.addGameScore=function(t){return this.lvlTotalScore+=this.calculateNongNocScore(t),this.lvlTotalScore},t.prototype.getTotalScore=function(){return this.lvlTotalScore},t.prototype.getTotalStar=function(){return 3},t.prototype.starCollected=function(t){return t>=this.stars[2]?3:t>=this.stars[1]?2:t>=this.stars[0]?1:0},t.prototype.numOffTadpoles2Pass=function(){return this.minTadpoles2NextLevel},t.isLoad=!1,t.NumOfLevel=0,t._levelInstance=null,t._jsonContent=null,t=e=o([c],t)}());n.default=s,cc._RF.pop()},{"../../core/event-manager":"event-manager"}],"life-control":[function(t,e,n){"use strict";cc._RF.push(e,"bb09eAGVCpDHpjU/l6hbEZm","life-control");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/localstorage"),c=t("../../player-ref"),s=t("../../core/event-manager"),a=t("../../sdkbox-wrapper/admob"),l=t("../../sdkbox-wrapper/iap"),u=t("../../core/popup"),p=t("../iap-def"),d=cc._decorator,h=d.ccclass,f=d.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lifeLbl=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){var t=Math.floor(Date.now()/864e5);t>parseInt(r.default.getItem("saveDay","0"))&&(c.default.current.life=3,c.default.current.freeAd=5,r.default.setItem("saveDay",t.toString())),this.lifeLbl.string=c.default.current.life.toString()},e.prototype.start=function(){s.default.instance.register(n.EVT_LIFE_CHANGE,this.onLifeChanged,this),s.default.instance.register(n.EVT_LIFE_REQUIRE,this.onLifeRequire,this),s.default.instance.register(a.AdmodAds.EVT_AD_REWARD,this.onAdsReward,this),s.default.instance.register(l.IAP.EVT_BUY_SUCCESS,this.onIapSuccess,this),s.default.instance.register(l.IAP.EVT_BUY_FAILED,this.onIapFailed,this)},e.prototype.onButtonBuy=function(){this.showMoreLivesPopup("More life, more fun !!!")},e.prototype.onLifeRequire=function(){this.showMoreLivesPopup("You are out off lives,\nDo you want some more ?")},e.prototype.onLifeChanged=function(){this.lifeLbl.string=c.default.current.life.toString()},e.prototype.showMoreLivesPopup=function(t){u.default.instance.showMoreLivePopup(t,c.default.current.freeAd>0,function(){c.default.current.freeAd--,cc.sys.isMobile?a.AdmodAds.show("reward"):(c.default.current.life++,s.default.instance.dispatch(n.EVT_LIFE_CHANGE),s.default.instance.dispatch("game-resume"))},function(){cc.sys.isMobile?l.IAP.purchase("topup1"):(c.default.current.life++,s.default.instance.dispatch(n.EVT_LIFE_CHANGE),s.default.instance.dispatch("game-resume"))},function(){cc.sys.isMobile?l.IAP.purchase("topup2"):(c.default.current.life++,s.default.instance.dispatch(n.EVT_LIFE_CHANGE),s.default.instance.dispatch("game-resume"))},function(){s.default.instance.dispatch("game-resume")}),s.default.instance.dispatch("game-pause")},e.prototype.onAdsReward=function(t,e,o){u.default.instance.showInfoPopup("Tada!\nYou've got new life.\nCongratulation and enjoy the game.",function(){c.default.current.life+=2,s.default.instance.dispatch(n.EVT_LIFE_CHANGE),s.default.instance.dispatch("game-resume")})},e.prototype.onIapSuccess=function(t){cc.log("iap success: "+JSON.stringify(t)),u.default.instance.showInfoPopup("Tada!\nYou've got new life.\nCongratulation and enjoy the game.",function(){var e=p.IAP_PRODUCTS[t.id];c.default.current.life+=e||1,s.default.instance.dispatch(n.EVT_LIFE_CHANGE),s.default.instance.dispatch("game-resume")})},e.prototype.onIapFailed=function(t,e){cc.log("iap failed: "+JSON.stringify(t)),cc.log("iap failed: "+e),u.default.instance.showInfoPopup("error !!!\nsorry, you can not\npurchase at this time !",function(){s.default.instance.dispatch("game-resume")})},e.prototype.onDestroy=function(){s.default.instance.unregisterTarget(this)},e.EVT_LIFE_CHANGE="livechange",e.EVT_LIFE_REQUIRE="liverequire",i([f(cc.Label)],e.prototype,"lifeLbl",void 0),e=n=i([h],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../core/event-manager":"event-manager","../../core/localstorage":"localstorage","../../core/popup":"popup","../../player-ref":"player-ref","../../sdkbox-wrapper/admob":"admob","../../sdkbox-wrapper/iap":"iap","../iap-def":"iap-def"}],loader:[function(t,e,n){"use strict";cc._RF.push(e,"9353alEtjFNbItXpbB1+rL+","loader");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global-var"),c=t("../player-ref"),s=t("./event-manager"),a=t("./sound-manager"),l=t("./localization"),u=t("../sdkbox-wrapper/analytics"),p=t("../sdkbox-wrapper/admob"),d=t("../sdkbox-wrapper/iap"),h=t("../game/components/level"),f=t("../sdkbox-wrapper/facebook"),g=cc._decorator,y=g.ccclass,m=g.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextScene="main-menu",e.targetLoad="",e._loadInstances={PlayerRef:!1,Sound:!1,LevelInfo:!1},e._loadGame=!1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){if(0==n.loaded)if("loader"!=this.getCurrentSceneName()){var t=""!=this.targetLoad?this.targetLoad:this.getCurrentSceneName();r.default.instance.set("loader-nextScene",t),cc.director.loadScene("loader")}else{n.loaded=!0;var e=r.default.instance.get("loader-nextScene",!0);this.nextScene=null!=e?e:this.nextScene}},e.prototype.start=function(){"loader"==this.getCurrentSceneName()&&this.initLoader()},e.prototype.initLoader=function(){var t=this;s.default.instance.registerOnce("PlayerRef-init",function(){t._loadInstances.PlayerRef=!0},this),s.default.instance.registerOnce("Sound_initialized",function(){t._loadInstances.Sound=!0},this),s.default.instance.registerOnce("Level_initialized",function(){t._loadInstances.LevelInfo=!0,c.default.current},this),h.default.load(),a.default.instance.init(),null==l.default.getCurrentLanguage()&&l.default.setLanguage(cc.sys.language),d.IAP.init(),u.Analytics.init(),p.AdmodAds.init(),f.FaceBook.init(),u.Analytics.setScreenName("Loader"),u.Analytics.logEvent("StartLoading",null)},e.prototype.update=function(t){c.default.current.initialized&&(this._loadInstances.PlayerRef=!0);var e=!0;for(var n in this._loadInstances)if(0==this._loadInstances[n]){e=!1;break}e&&!this._loadGame&&(this._loadGame=!0,cc.director.loadScene(this.nextScene),u.Analytics.logEvent("EndLoading",null))},e.prototype.getCurrentSceneName=function(){var t="";return cc.game._sceneInfos.forEach(function(e){e.uuid==cc.director._scene._id&&(t=(t=e.url).substring(t.lastIndexOf("/")+1).match(/[^\.]+/)[0])}),t},e.loaded=!1,i([m],e.prototype,"targetLoad",void 0),e=n=i([y],e)}(cc.Component);n.default=b,cc._RF.pop()},{"../game/components/level":"level","../player-ref":"player-ref","../sdkbox-wrapper/admob":"admob","../sdkbox-wrapper/analytics":"analytics","../sdkbox-wrapper/facebook":"facebook","../sdkbox-wrapper/iap":"iap","./event-manager":"event-manager","./global-var":"global-var","./localization":"localization","./sound-manager":"sound-manager"}],localization:[function(t,e,n){"use strict";cc._RF.push(e,"71238deafNK+p8wUFQbZvd1","localization"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("i18n"),i=function(){function t(){}return t.get=function(t){var e=o.t(t);return""==e&&(e="N/A"),e},t.setLanguage=function(t){if(o.init(t)){for(var e=cc.director.getScene().children,n=[],i=0;i<e.length;++i){var r=e[i].getComponentsInChildren("LabelLocalized");Array.prototype.push.apply(n,r)}for(i=0;i<n.length;++i){n[i].updateLabel()}}},t.getCurrentLanguage=function(){return o.getSaveLang()},t}();n.default=i,cc._RF.pop()},{i18n:"i18n"}],localstorage:[function(t,e,n){"use strict";cc._RF.push(e,"ad4eaAHW+xHZqqJ75K4VCn4","localstorage"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../config"),i=function(){function t(){}return t.setItem=function(t,e){cc.sys.localStorage.setItem(this._key(t),e)},t.getItem=function(t,e){return cc.sys.localStorage.getItem(this._key(t))||e},t.removeItem=function(t){cc.sys.localStorage.removeItem(this._key(t))},t._key=function(t){return o.default.PROJECT_ID+t},t}();n.default=i,cc._RF.pop()},{"../config":"config"}],"main-menu":[function(t,e,n){"use strict";cc._RF.push(e,"7ed0aJhOqZCxoUZ/Kdztn4n","main-menu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../sdkbox-wrapper/analytics"),c=t("../../player-ref"),s=t("../../core/popup"),a=t("../../core/event-manager"),l=t("./life-control"),u=t("../../core/loader"),p=t("../components/level"),d=t("./level-select-item"),h=t("../../utils"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelSelectRoot=null,e.levelSelectItemPrefab=null,e.bubbleWaterPrefab=null,e.bubbleLayer=null,e}return o(e,t),e.prototype.onLoad=function(){this.bubbleLayer=this.node.getChildByName("bg")},e.prototype.start=function(){u.default.loaded&&(r.Analytics.setScreenName("Main Menu"),this.buildLvlSelecteBoard(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this))},e.prototype.onTouch=function(t){if(null!=this.bubbleLayer){var e=this.node.convertToNodeSpaceAR(t.getLocation()),n=cc.instantiate(this.bubbleWaterPrefab);n.parent=this.bubbleLayer,n.position=e,n.scale=1.5;var o=n.getComponent(sp.Skeleton);o.setCompleteListener(function(){n.removeFromParent()}),o.setAnimation(0,"spilling_water",!1)}},e.prototype.buildLvlSelecteBoard=function(){var t=this;c.default.current.levelAllSetting.forEach(function(e){var n=cc.instantiate(t.levelSelectItemPrefab);n.getComponent(d.default).init(e.id+1,e.starCollect,e.unlocked,t.onLevelButtonClick.bind(t)),t.levelSelectRoot.addChild(n)})},e.prototype.onLevelButtonClick=function(t){c.default.current.life>0?(c.default.current.life--,a.default.instance.dispatch(l.default.EVT_LIFE_CHANGE),p.default.Instance.currentLvl=t,cc.director.loadScene("level_"+h.Utils.zeropad(t,3))):a.default.instance.dispatch(l.default.EVT_LIFE_REQUIRE)},e.prototype.onButtonBack=function(){s.default.instance.showConfirmPopup("Do you wanna quit the game ?","Yes","No",function(){cc.game.end()})},e.prototype.onButtonUnlockAll=function(){c.default.current.levelAllSetting.forEach(function(t){t.unlocked=!0}),this.levelSelectRoot.removeAllChildren(),this.buildLvlSelecteBoard()},e.prototype.onButtonAddHeart=function(){c.default.current.life+=10,a.default.instance.dispatch(l.default.EVT_LIFE_CHANGE)},e.prototype.onDestroy=function(){a.default.instance.unregisterTarget(this)},i([y(cc.Node)],e.prototype,"levelSelectRoot",void 0),i([y(cc.Prefab)],e.prototype,"levelSelectItemPrefab",void 0),i([y(cc.Prefab)],e.prototype,"bubbleWaterPrefab",void 0),e=i([g],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../../core/event-manager":"event-manager","../../core/loader":"loader","../../core/popup":"popup","../../player-ref":"player-ref","../../sdkbox-wrapper/analytics":"analytics","../../utils":"utils","../components/level":"level","./level-select-item":"level-select-item","./life-control":"life-control"}],"nong-noc":[function(t,e,n){"use strict";cc._RF.push(e,"033e2MRLG9Fc6RPLG52REHT","nong-noc");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r,c=t("../../core/event-manager"),s=t("../collider-def"),a=t("./bubble-controller"),l=cc._decorator,u=l.ccclass,p=l.property;(function(t){t[t.NORMAL=0]="NORMAL",t[t.FORWARD=1]="FORWARD",t[t.BACKWARD=2]="BACKWARD",t[t.GOAL=3]="GOAL",t[t.DEATH=4]="DEATH"})(r||(r={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalSpeed=10,e.forwardSpeed=50,e.backwardSpeed=30,e.animNongNoc=null,e.waterPosition=null,e.animLight=null,e.direction=0,e.state=r.NORMAL,e.speed=e.normalSpeed,e.target=null,e.rigidbody=null,e.MaxTimeForSmallWater=.3,e.time4WaterEclapse=e.MaxTimeForSmallWater,e.paused=!1,e.visibleSize=cc.Size.ZERO,e}var n;return o(e,t),n=e,e.prototype.start=function(){var t=this;this.visibleSize=cc.view.getVisibleSize(),this.animLight=cc.instantiate(this.animNongNoc.node),this.animLight.active=!1,this.animLight.parent=this.animNongNoc.node.parent,this.rigidbody=this.getComponent(cc.RigidBody),this.updateMove(this.direction,this.speed),this.animNongNoc.setAnimation(0,"tadpole_idle_2",!0),c.default.instance.register("game-pause",function(){t.paused=!0,t.animNongNoc.paused=!0,t.animLight.getComponent(sp.Skeleton).paused=!0,cc.director.getScheduler().pauseTarget(t),cc.director.getActionManager().pauseTarget(t.node)},this),c.default.instance.register("game-resume",function(){t.paused=!1,t.animNongNoc.paused=!1,t.animLight.getComponent(sp.Skeleton).paused=!1,cc.director.getScheduler().resumeTarget(t),cc.director.getActionManager().resumeTarget(t.node)},this)},e.prototype.init=function(t){this.direction=t,this.node.angle=this.direction-90},e.prototype.death=function(){this.state=r.DEATH,c.default.instance.dispatch(n.EVT_DEATH),this.node.removeFromParent()},e.prototype.updateMove=function(t,e){var n=this;this.scheduleOnce(function(){n.node.angle=n.direction-90})},e.prototype.update=function(t){if(!this.paused&&this.state<r.GOAL){var e=cc.misc.degreesToRadians(this.direction),o=Math.cos(e)*this.speed,i=Math.sin(e)*this.speed;this.rigidbody.linearVelocity=cc.v2(o,i);var s=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);(s.x<0||s.x>this.visibleSize.width||s.y<0||s.y>this.visibleSize.height)&&(c.default.instance.dispatch(n.EVT_ESCAPE),this.node.removeFromParent()),this.time4WaterEclapse-=t,this.time4WaterEclapse<=0&&(this.time4WaterEclapse=this.MaxTimeForSmallWater,c.default.instance.dispatch(a.default.EVT_SPAW_BUBBLE,this.node.convertToWorldSpaceAR(this.waterPosition.position),!1))}},e.prototype.onBeginContact=function(t,e,n){var o=this;if(this.state!=r.GOAL)if(n.node.groupIndex==s.CollidGroup.CONTROL)if(n.tag==s.CollidTag.CONTROL){var i=n.node.position,c=this.node.position.sub(i),a=cc.misc.radiansToDegrees(Math.atan2(c.y,c.x));a<0&&(a=360+a),this.target=i,Math.abs(this.direction-a)>90?this.speed=this.backwardSpeed:this.speed=this.forwardSpeed,this.direction=a,this.updateMove(this.direction,this.speed)}else this.state=r.GOAL,this.animNongNoc.setAnimation(0,"tadpole_moving",!0),this.scheduleOnce(function(){o.rigidbody.type=cc.RigidBodyType.Static;var t=n.node.position.sub(o.node.position),e=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x));e<0&&(e=360+e),o.node.angle=e-90,o.node.removeComponent(cc.PhysicsCircleCollider)}),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){o.animNongNoc.setAnimation(0,"anim_transform_frog",!1),o.animNongNoc.setCompleteListener(o.onAnimComplete.bind(o,"anim_transform_frog")),o.animLight.active=!0,o.animLight.getComponent(sp.Skeleton).setAnimation(0,"light_top",!0)})));else n.node.groupIndex==s.CollidGroup.TADPOLE?(this.target=null,this.updateMove(this.direction,this.normalSpeed)):n.node.groupIndex==s.CollidGroup.ENEMY?n.tag:(n.node.groupIndex,s.CollidGroup.OBSTACLE);else n.node.groupIndex!=s.CollidGroup.TADPOLE&&n.node.groupIndex!=s.CollidGroup.ENEMY||(t.disabledOnce=!0)},e.prototype.onAnimComplete=function(t){"anim_transform_frog"==t&&c.default.instance.dispatch("get-score",this.node)},e.prototype.onDestroy=function(){c.default.instance.unregisterTarget(this)},e.EVT_ESCAPE="nn-escape",e.EVT_DEATH="nn-death",e.EVT_GOAL="nn-goal",i([p()],e.prototype,"normalSpeed",void 0),i([p()],e.prototype,"forwardSpeed",void 0),i([p()],e.prototype,"backwardSpeed",void 0),i([p(sp.Skeleton)],e.prototype,"animNongNoc",void 0),i([p(cc.Node)],e.prototype,"waterPosition",void 0),e=n=i([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../core/event-manager":"event-manager","../collider-def":"collider-def","./bubble-controller":"bubble-controller"}],"path-node":[function(t,e,n){"use strict";cc._RF.push(e,"a3437f6iHRC55effzu3hI+D","path-node");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.executeInEditMode,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fogDelay=5,e}return o(e,t),e.prototype.onLoad=function(){2==this.node.childrenCount?(this.cp1=this.node.parent.convertToNodeSpaceAR(this.node.children[0].convertToWorldSpaceAR(cc.Vec2.ZERO)),this.cp2=this.node.parent.convertToNodeSpaceAR(this.node.children[1].convertToWorldSpaceAR(cc.Vec2.ZERO))):cc.warn("Path node need 2 control point node as child")},e.prototype.start=function(){this.node.removeAllChildren()},Object.defineProperty(e.prototype,"attachData",{get:function(){return{fogDelay:this.fogDelay}},enumerable:!0,configurable:!0}),i([a()],e.prototype,"fogDelay",void 0),e=i([c,s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],"player-ref":[function(t,e,n){"use strict";cc._RF.push(e,"4a529iwQnlGbq3EfIYgrRWO","player-ref"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./core/event-manager"),i=t("./core/localstorage"),r=function(){function t(){this.initialized=!1,this._levelSettings=[],this._firstTime="false",this._id="",this._name="",this._life=3,this._freeAd=5}return Object.defineProperty(t,"current",{get:function(){return null==this._current&&(this._current=new t,this._current.init()),this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levelAllSetting",{get:function(){return this._levelSettings},enumerable:!0,configurable:!0}),t.prototype.init=function(){if(this._firstTime=i.default.getItem("first-time","true"),"true"==this._firstTime){i.default.setItem("first-time","false");for(var t=0;t<16;t++){var e={id:t,unlocked:0==t,starCollect:0};this._levelSettings.push(e),i.default.setItem("lvl-setting",JSON.stringify(this._levelSettings))}}else{var n=i.default.getItem("lvl-setting",null);null!=n&&(this._levelSettings=JSON.parse(n))}this._name=i.default.getItem("user-name","NickName"),this.life=parseInt(i.default.getItem("user-life","3")),this.freeAd=parseInt(i.default.getItem("user-free-ad","5")),cc.log("player init"),o.default.instance.dispatch("PlayerRef-init","success"),this.initialized=!0},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.setId=function(t){this._id=t},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t,i.default.setItem("user-name",t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"life",{get:function(){return this._life},set:function(t){this._life=t,i.default.setItem("user-life",t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"freeAd",{get:function(){return this._freeAd},set:function(t){this._freeAd=t,i.default.setItem("user-free-ad",t.toString())},enumerable:!0,configurable:!0}),t.prototype.unlockLevel=function(t,e){this._levelSettings[t].unlocked=!0,this._levelSettings[t-1].starCollect=e},t.prototype.saveAll=function(){i.default.setItem("lvl-setting",JSON.stringify(this._levelSettings))},t._current=null,t}();n.default=r,cc._RF.pop()},{"./core/event-manager":"event-manager","./core/localstorage":"localstorage"}],polyglot:[function(t,e,n){(function(t){"use strict";cc._RF.push(e,"fc9daZr2NhGiIHGcSpiJP7z","polyglot");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,i){"function"==typeof define&&define.amd?define([],function(){return i(t)}):"object"===(void 0===n?"undefined":o(n))?e.exports=i(t):t.Polyglot=i(t)})(void 0!==t?t:void 0,function(t){var e=String.prototype.replace;function n(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||y}n.VERSION="1.0.0",n.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},n.prototype.extend=function(t,e){var n;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],e&&(i=e+"."+i),"object"===(void 0===n?"undefined":o(n))?this.extend(n,i):this.phrases[i]=n)},n.prototype.unset=function(t,e){var n;if("string"==typeof t)delete this.phrases[t];else for(var i in t)t.hasOwnProperty(i)&&(n=t[i],e&&(i=e+"."+i),"object"===(void 0===n?"undefined":o(n))?this.unset(n,i):delete this.phrases[i])},n.prototype.clear=function(){this.phrases={}},n.prototype.replace=function(t){this.clear(),this.extend(t)},n.prototype.t=function(t,e){var n,o;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof n&&(e=m(e),o=g(o=u(n,this.currentLocale,e.smart_count),e)),o},n.prototype.has=function(t){return t in this.phrases};var i="||||",r={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},c={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function s(t){var e,n,o,i={};for(e in t)if(t.hasOwnProperty(e))for(o in n=t[e])i[n[o]]=e;return i}var a=/^\s+|\s+$/g;function l(t){return e.call(t,a,"")}function u(t,e,n){var o;return null!=n&&t?l((o=t.split(i))[d(e,n)]||o[0]):t}function p(t){var e=s(c);return e[t]||e.en}function d(t,e){return r[p(t)](e)}var h=/\$/g,f="$$$$";function g(t,n){for(var o in n)if("_"!==o&&n.hasOwnProperty(o)){var i=n[o];"string"==typeof i&&(i=e.call(n[o],h,f)),t=e.call(t,new RegExp("%\\{"+o+"\\}","g"),i)}return t}function y(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function m(t){var e={};for(var n in t)e[n]=t[n];return e}return n}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],popup:[function(t,e,n){"use strict";cc._RF.push(e,"c2517+l3BlDPqhUWyhQt7/S","popup");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogPopup=null,e.waitingPopup=null,e.winPopup=null,e.moreLivePopup=null,e.waitingPopupNode=null,e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance?this._instance:(cc.error("Popup does not init yet, this need to be init in loader"),null)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){n._instance=this,cc.game.addPersistRootNode(this.node),this.node.zIndex=1e3},e.prototype.onClosePopup=function(t,e,n){e.active=!1;var o=t.getComponent(cc.Animation);o.play("popup-disappear"),o.once("finished",function(){t.removeFromParent(),n&&n()})},e.prototype.showInfoPopup=function(t,e){var n=cc.find("Canvas"),o=cc.instantiate(this.dialogPopup),i=o.getChildByName("blockinput"),r=i.getComponent(cc.Widget);r.target=n,r.left=0,r.right=0,r.top=0,r.bottom=0,o.getChildByName("content").getComponent(cc.Label).string=t,o.getChildByName("positivebutton").active=!1,o.getChildByName("negativebutton").active=!1,o.getChildByName("okbutton").getComponent(cc.Button).node.on("click",this.onClosePopup.bind(this,o,i,e)),o.getChildByName("closebutton").getComponent(cc.Button).node.on("click",this.onClosePopup.bind(this,o,i,e)),n.addChild(o),r.updateAlignment()},e.prototype.showMoreLivePopup=function(t,e,n,o,i,r){var c=this,s=cc.find("Canvas"),a=cc.instantiate(this.moreLivePopup),l=a.getChildByName("blockinput"),u=l.getComponent(cc.Widget);u.target=s,u.left=0,u.right=0,u.top=0,u.bottom=0,a.getChildByName("content").getComponent(cc.Label).string=t;var p=a.getChildByName("adsbutton").getComponent(cc.Button);p.interactable=e,p.node.on("click",function(){c.onClosePopup(a,l,n)}),a.getChildByName("topup1button").getComponent(cc.Button).node.on("click",function(){c.onClosePopup(a,l,o)}),a.getChildByName("topup2button").getComponent(cc.Button).node.on("click",function(){c.onClosePopup(a,l,i)}),a.getChildByName("closebutton").getComponent(cc.Button).node.on("click",function(){c.onClosePopup(a,l,r)}),s.addChild(a),u.updateAlignment()},e.prototype.showConfirmPopup=function(t,e,n,o,i){var r=this,c=cc.find("Canvas"),s=cc.instantiate(this.dialogPopup),a=s.getChildByName("blockinput"),l=a.getComponent(cc.Widget);l.target=c,l.left=0,l.right=0,l.top=0,l.bottom=0,s.getChildByName("content").getComponent(cc.Label).string=t,s.getChildByName("okbutton").active=!1,s.getChildByName("positivebutton").getChildByName("Label").getComponent(cc.Label).string=e,s.getChildByName("negativebutton").getChildByName("Label").getComponent(cc.Label).string=n,s.getChildByName("positivebutton").getComponent(cc.Button).node.on("click",function(){o?o()||s.removeFromParent():s.removeFromParent()}),s.getChildByName("negativebutton").getComponent(cc.Button).node.on("click",function(){r.onClosePopup(s,a,i)}),s.getChildByName("closebutton").getComponent(cc.Button).node.on("click",function(){r.onClosePopup(s,a,i)}),c.addChild(s),l.updateAlignment()},e.prototype.showWaitingPopup=function(t){var e=cc.find("Canvas"),n=cc.instantiate(this.waitingPopup),o=n.getChildByName("blockinput").getComponent(cc.Widget);o.target=e,o.left=0,o.right=0,n.getChildByName("content").getComponentInChildren(cc.Label).string=t,this.waitingPopupNode=n,e.addChild(n)},e.prototype.showWinPopup=function(t,e,n){var o=cc.find("Canvas"),i=cc.instantiate(this.winPopup),r=i.getChildByName("blockinput").getComponent(cc.Widget);r.target=o,r.left=0,r.right=0,r.top=0,r.bottom=0;var c=i.getChildByName("star_anim").getComponent(sp.Skeleton);i.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){c.setAnimation(0,"act_star_"+t,!1)}))),i.getChildByName("okbutton").getComponent(cc.Button).node.on("click",function(){i.removeFromParent(),n&&n()}),o.addChild(i),r.updateAlignment();var s=i.getChildByName("content");s.getComponent(cc.Label).string="",s.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){s.getComponent(cc.Label).string=e.toString(),s.opacity=1,s.scale=5}),cc.spawn(cc.scaleTo(.3,1,1),cc.fadeTo(.3,255))))},e.prototype.hideWaitingPopup=function(){this.waitingPopupNode.removeFromParent()},e.prototype.showNotify=function(t,e){void 0===e&&(e=3);var n=cc.instantiate(this.waitingPopup);n.getChildByName("blockinput").removeFromParent(),n.getChildByName("content").getComponentInChildren(cc.Label).string=t,cc.find("Canvas").addChild(n),this.scheduleOnce(function(){n.removeFromParent()},e)},e._instance=null,i([s(cc.Prefab)],e.prototype,"dialogPopup",void 0),i([s(cc.Prefab)],e.prototype,"waitingPopup",void 0),i([s(cc.Prefab)],e.prototype,"winPopup",void 0),i([s(cc.Prefab)],e.prototype,"moreLivePopup",void 0),e=n=i([c],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],ran:[function(t,e,n){"use strict";cc._RF.push(e,"beed4aKDypIT5rO0+UX4om8","ran");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./enemy"),c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){return this.type=r.EnemyType.SNAKE,this.animationName[r.EnemyAnimID.SWIMMING]="snake_swiming",this.animationName[r.EnemyAnimID.STURN]="snake_stun",this.animationName[r.EnemyAnimID.EAT_TADPOLES]="snake_eat_tadpoles",this.playAnim(this.animationName[r.EnemyAnimID.SWIMMING],!0),this.speed=35,!0},e=i([s],e)}(r.default));n.default=a,cc._RF.pop()},{"./enemy":"enemy"}],rua:[function(t,e,n){"use strict";cc._RF.push(e,"1ad4cHo2NFC+KpCg5CA+gBA","rua");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./enemy"),c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){return this.type=r.EnemyType.TURTLE,this.animationName[r.EnemyAnimID.SWIMMING]="turtle_swiming",this.animationName[r.EnemyAnimID.STURN]="turtle_stun",this.animationName[r.EnemyAnimID.EAT_TADPOLES]="turtle_eat_tadpoles",this.playAnim(this.animationName[r.EnemyAnimID.SWIMMING],!0),!0},e=i([s],e)}(r.default));n.default=a,cc._RF.pop()},{"./enemy":"enemy"}],sen:[function(t,e,n){"use strict";cc._RF.push(e,"1d04a7i/RxMHp4qDdpxK3WW","sen");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/event-manager"),c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.prototype.start=function(){r.default.instance.register(n.EVT_RUNG_RINH,this.rungrinh,this)},e.prototype.rungrinh=function(t){this.node.convertToWorldSpaceAR(cc.Vec2.ZERO).sub(t).mag()<50&&this.getComponentInChildren(cc.Sprite).node.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.2,1).easing(cc.easeBackOut())))},e.prototype.onDestroy=function(){r.default.instance.unregisterTarget(this)},e.EVT_RUNG_RINH="sen_rung",e=n=i([s],e)}(cc.Component));n.default=a,cc._RF.pop()},{"../../core/event-manager":"event-manager"}],"sound-manager":[function(t,e,n){"use strict";cc._RF.push(e,"59e6dC1iuNE15G3c1/RKO6a","sound-manager");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,t("./event-manager")),s=function(){function t(){this.sounds={},this.playingSounds={},this.initialized=!1,this.enable=!0,this.effectEnable=!0,this.musicEnable=!0,this.DEBUG_LOG=!1}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"soundEnable",{get:function(){return this.enable},enumerable:!0,configurable:!0}),t.prototype.setEnable=function(t){this.enable=t,cc.sys.localStorage.setItem("Sound_enable",t?1:0),this.setEffectEnable(t),this.setMusicEnable(t)},Object.defineProperty(t.prototype,"soundEffectEnable",{get:function(){return this.effectEnable},enumerable:!0,configurable:!0}),t.prototype.setEffectEnable=function(t){this.effectEnable=t,cc.sys.localStorage.setItem("Sound_effect_enable",t?1:0)},Object.defineProperty(t.prototype,"soundMusicEnable",{get:function(){return this.musicEnable},enumerable:!0,configurable:!0}),t.prototype.setMusicEnable=function(t){this.musicEnable=t,cc.sys.localStorage.setItem("Sound_music_enable",t?1:0)},t.prototype.log=function(t){this.DEBUG_LOG&&cc.log(t)},t.prototype.error=function(t){this.DEBUG_LOG&&cc.error(t)},t.prototype.init=function(){var t=this;cc.loader.loadResDir("sounds",cc.AudioClip,function(e,n,o){o.length>0&&n.forEach(function(e,n){t.sounds[e.name]=e}),t.initialized=!0,t.enable=!cc.sys.localStorage.getItem("Sound_enable")||1==parseInt(cc.sys.localStorage.getItem("Sound_enable")),t.effectEnable=!cc.sys.localStorage.getItem("Sound_effect_enable")||1==parseInt(cc.sys.localStorage.getItem("Sound_effect_enable")),t.musicEnable=!cc.sys.localStorage.getItem("Sound_music_enable")||1==parseInt(cc.sys.localStorage.getItem("Sound_music_enable")),cc.log("sound init"),c.default.instance.dispatch("Sound_initialized")})},t.prototype.playMusic=function(t,e){if(void 0===e&&(e=!0),!this.musicEnable||!this.initialized)return null;if(t=t.toLowerCase(),this.sounds[t]){this.log("play music: "+t);var n=cc.audioEngine.playMusic(this.sounds[t],e);return this.playingSounds[t]=n,n}return this.error("playMusic - clipName: "+t+" not found"),null},t.prototype.playEffect=function(t,e){if(void 0===e&&(e=!1),!this.enable||!this.initialized)return null;if(t=t.toLowerCase(),this.sounds[t]){this.log("play effect: "+t);var n=cc.audioEngine.playEffect(this.sounds[t],e);return this.playingSounds[t]=n,n}return this.error("playEffect - clipName: "+t+" not found"),null},t.prototype.playRandom=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!0),!this.enable||!this.initialized)return null;var o=Math.floor(Math.random()*t.length),i=t[o].toLowerCase();if(this.sounds[i]){this.log("play random: "+i);var r=null;return r=n?this.playEffect(i,e):this.playMusic(i,e),this.playingSounds[i]=r,r}return this.error("playRandom - clipName: "+t[o]+" not found"),null},t.prototype.pause=function(t){this.enable&&(t=t.toLowerCase(),void 0!=this.playingSounds[t]&&cc.audioEngine.getState(this.playingSounds[t])===cc.audioEngine.AudioState.PLAYING?cc.audioEngine.pause(this.playingSounds[t]):(this.error("Pause sound: "+t+" is not in playing list"),delete this.playingSounds[t]))},t.prototype.resume=function(t){this.enable&&(t=t.toLowerCase(),void 0!=this.playingSounds[t]&&cc.audioEngine.getState(this.playingSounds[t])===cc.audioEngine.AudioState.PAUSED?cc.audioEngine.resume(this.playingSounds[t]):(this.error("Resume sound: "+t+" is not in pause list"),delete this.playingSounds[t]))},t.prototype.stop=function(t){this.enable&&(this.log("stop sound: "+t),t=t.toLowerCase(),void 0!=this.playingSounds[t]?(cc.audioEngine.stop(this.playingSounds[t]),delete this.playingSounds[t]):this.error("Stop sound: "+t+" is not in playing list"))},t.prototype.isPlaying=function(t){return t=t.toLowerCase(),void 0!=this.playingSounds[t]&&cc.audioEngine.getState(this.playingSounds[t])==cc.audioEngine.AudioState.PLAYING},t.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},t.prototype.resumeAll=function(){this.enable&&cc.audioEngine.resumeAll()},t.prototype.stopAll=function(){this.enable&&cc.audioEngine.stopAll()},t.prototype.setMusicVolume=function(t){this.musicEnable&&cc.audioEngine.setMusicVolume(t)},t.prototype.setEffectVolume=function(t){this.effectEnable&&cc.audioEngine.setEffectsVolume(t)},t.prototype.getSoundId=function(t){return t=t.toLowerCase(),this.playingSounds[t]},t._instance=null,t=e=o([r],t)}();n.default=s,cc._RF.pop()},{"./event-manager":"event-manager"}],spawner:[function(t,e,n){"use strict";cc._RF.push(e,"535a9TEjzVJWY28Dzv4RIld","spawner");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./components/nong-noc"),c=t("./components/level"),s=t("../utils"),a=t("../core/event-manager"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delayTime=1,e.spawnPosition=null,e.spawPrefab=null,e._gameRoot=null,e.numOfNongNocWasSpawned=0,e._spawpositions=null,e}return o(e,t),e.prototype.start=function(){var t=this;a.default.instance.register("game-pause",function(){cc.director.getScheduler().pauseTarget(t)},this),a.default.instance.register("game-resume",function(){cc.director.getScheduler().resumeTarget(t)},this)},e.prototype.startSpawn=function(t,e){this._gameRoot=e,this.spawPrefab=t,this._spawpositions=e.getChildByName("spawn_positions").children,this.schedule(this.spawn.bind(this),this.delayTime)},e.prototype.spawn=function(){if(!(this.numOfNongNocWasSpawned>=c.default.Instance.totalNongNoc))for(var t=0;t<5;t++){var e=Math.round(s.Utils.randomRange(0,this._spawpositions.length-1)),n=this._spawpositions[e].position,o=360*Math.random(),i=cc.instantiate(this.spawPrefab);i.setPosition(n),i.getComponent(r.default).init(o),this._gameRoot.addChild(i),this.numOfNongNocWasSpawned++;break}},e.prototype.onDestroy=function(){a.default.instance.unregisterTarget(this)},i([p({tooltip:"Dealy between 2 spawn (in second)"})],e.prototype,"delayTime",void 0),i([p(cc.Node)],e.prototype,"spawnPosition",void 0),e=i([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../core/event-manager":"event-manager","../utils":"utils","./components/level":"level","./components/nong-noc":"nong-noc"}],"ui-controller":[function(t,e,n){"use strict";cc._RF.push(e,"18c70H2PIxJD5OyJ/MlhvEb","ui-controller");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./core/event-manager"),c=t("./game/components/level"),s=t("./game/components/nong-noc"),a=t("./core/loader"),l=t("./core/popup"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbltabpolesEaten=null,e.lbltabpolesTotal=null,e.animGetScore=null,e.addScorePrefab=null,e.numTobpoles=0,e}return o(e,t),e.prototype.start=function(){var t=this;a.default.loaded&&(this.lbltabpolesEaten.string="0",this.lbltabpolesTotal.string="0",r.default.instance.register("get-score",this.playGetScoreEffect,this),r.default.instance.register("game-start",function(){t.lbltabpolesTotal.string=""+c.default.Instance.totalNongNoc},this))},e.prototype.playGetScoreEffect=function(t){var e=this,n=t.parent.convertToWorldSpaceAR(t.position);t.parent=null,t.parent=this.lbltabpolesEaten.node.parent,t.position=this.lbltabpolesEaten.node.parent.convertToNodeSpaceAR(n);var o=cc.v2(this.lbltabpolesEaten.node.position.x-(this.lbltabpolesEaten.node.width>>1),this.lbltabpolesEaten.node.position.y),i=cc.instantiate(this.addScorePrefab);i.parent=t.parent,i.position=cc.v2(o.x,o.y-20),i.opacity=1,i.scale=.5;var a=c.default.Instance.calculateNongNocScore(this.numTobpoles+1);i.getComponent(cc.Label).string="+"+a.toString(),t.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.9,.8,.8)),cc.rotateTo(1,0),cc.moveTo(1,o).easing(cc.easeSineOut())),cc.callFunc(function(){e.numTobpoles++,e.lbltabpolesEaten.string=e.numTobpoles.toString(),e.lbltabpolesEaten.node.runAction(cc.sequence(cc.scaleTo(.3,1.5),cc.scaleTo(.35,1))),e.animGetScore.setAnimation(0,"effect_get_score",!1),r.default.instance.dispatch(s.default.EVT_GOAL);i.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,1,1),cc.moveTo(.5,cc.v2(o.x,o.y+40)),cc.fadeTo(.5,255)),cc.spawn(cc.scaleTo(.5,.5,.5),cc.moveTo(.5,cc.v2(o.x,o.y+60)),cc.fadeTo(.5,100)),cc.callFunc(function(){i.removeFromParent()}))),t.removeFromParent()})))},e.prototype.onBackButton=function(){l.default.instance.showConfirmPopup("Do you wanna return to main menu ?","Yes","No",function(){cc.director.loadScene("main-menu")},function(){r.default.instance.dispatch("game-resume")}),r.default.instance.dispatch("game-pause")},e.prototype.onButtonWinNow=function(){cc.log("win-now"),r.default.instance.dispatch("win-now")},e.prototype.onDestroy=function(){r.default.instance.unregisterTarget(this)},e.EVT_EAT_TABPOLES="eattabpoles",i([d(cc.Label)],e.prototype,"lbltabpolesEaten",void 0),i([d(cc.Label)],e.prototype,"lbltabpolesTotal",void 0),i([d(sp.Skeleton)],e.prototype,"animGetScore",void 0),i([d(cc.Prefab)],e.prototype,"addScorePrefab",void 0),e=i([p],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./core/event-manager":"event-manager","./core/loader":"loader","./core/popup":"popup","./game/components/level":"level","./game/components/nong-noc":"nong-noc"}],utils:[function(t,e,n){"use strict";cc._RF.push(e,"5cfb2oIO3hIpYyXE5URmBs6","utils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===e&&(e=!1),this.unique=[],this.initLength=-1,this.recycle=!1,this.initLength=t,this.recycle=e;for(var n=0;n<t;n++)this.unique[n]=n}return t.prototype.random=function(){if(0==this.unique.length){if(!this.recycle||-1==this.initLength)return-1;for(var t=0;t<this.initLength;t++)this.unique[t]=t}var e=Math.floor(Math.random()*(this.unique.length-1)),n=this.unique[e];return this.unique.splice(e,1),n},t}();n.RandomUnique=o;var i=function(){function t(){}return t.MAX_SAFE_INTEGER=9007199254740991,t.MIN_SAFE_INTEGER=-9007199254740991,t}();n.Constant=i;var r=function(){function t(){}return t.getCurrentSceneName=function(){var t="";return cc.game._sceneInfos.forEach(function(e){e.uuid==cc.director._scene._id&&(t=(t=e.url).substring(t.lastIndexOf("/")+1).match(/[^\.]+/)[0])}),t},t.lerp=function(t,e,n){return t+(e-t)*(n=(n=n<0?0:n)>1?1:n)},t.genUId=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)},t.extend=function(t,e){return null==e?t:(null==t&&(t={}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t)},t.randomRange=function(t,e){return Math.random()*(e-t)+t},t.zeropad=function(t,e){var n=t<0?"-":"";t<0&&(t=-t);for(var o=e-t.toString().length,i=0;i<o;i++)n+="0";return n+t.toString()},t.getAngleDeg=function(t,e){var n=t;e&&(n=e.sub(t));var o=180*Math.atan2(n.y,n.x)/Math.PI;return o<0?o+=360:o>360&&(o-=360),o},t.deltaAngle=function(t,e){var n=Math.abs(t-e);return n>180?360-n:n},t}();n.Utils=r,n.empty_func=function(){},cc._RF.pop()},{}],vpath:[function(t,e,n){"use strict";cc._RF.push(e,"94e5dPaZqlBxoE5P7txcg/v","vpath");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r,c,s=t("./path-node"),a=t("../../utils"),l=cc._decorator,u=l.ccclass,p=l.executeInEditMode,d=l.property;(function(t){t[t.LOOP=0]="LOOP",t[t.START=1]="START",t[t.BACK=2]="BACK"})(r=n.PathLoopType||(n.PathLoopType={})),function(t){t[t.BEZIER=0]="BEZIER",t[t.LINE=1]="LINE"}(c=n.PathType||(n.PathType={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.edit=!1,e.pathColor=cc.Color.RED,e.pathNodeColor=cc.Color.YELLOW,e.pathType=c.BEZIER,e.pathLoopType=r.BACK,e.points=[],e.pIdx=0,e.segments=[],e.segIdx=0,e.segCount=200,e.loopCount=0,e.minDis=5,e.referSpeed=15,e.segLength=0,e.debug=!1,e._segPath=[],e}return o(e,t),e.prototype.start=function(){var t=this;this.node.removeComponent(cc.Graphics),this.node.children.forEach(function(e){var n=e.getComponent(s.default),o={pos:n.node.position,cp1:n.cp1,cp2:n.cp2,data:n.attachData};t.points.push(o)}),this.node.removeAllChildren(),this.pathType==c.BEZIER&&this.buildSegment(),this.debug&&(this.graphics=this.node.addComponent(cc.Graphics))},e.prototype.update=function(){this.debug&&this.drawDebug()},e.prototype.getTarget=function(t,e){if(t=this.node.convertToNodeSpaceAR(t),this.pathType==c.LINE)return this.points[this.pIdx].pos.sub(t).mag()<this.minDis&&(this.pIdx=this.nextPIdx),this.toWorldPos(this.points[this.pIdx].pos);if(this.segments[this.segIdx].sub(t).mag()<this.minDis&&(this.segIdx++,this.segIdx==this.segments.length)){var n=this.loopCount;this.buildSegment(),this.loopCount>n&&e&&(e.endPath=!0)}return this.toWorldPos(this.segments[this.segIdx])},e.prototype.getReturnTarget=function(t,e){if(t=this.node.convertToNodeSpaceAR(t),e&&(e=this.node.convertToNodeSpaceAR(e)),this.pathType==c.LINE)return this.points[this.pIdx].pos.sub(t).mag()<this.minDis&&(this.pIdx=this.nextPIdx),this.toWorldPos(this.points[this.pIdx].pos);var n=this.segCount-this.segIdx,o=t.sub(this.segments[this.segIdx]).mag(),i=Math.floor(o/(this.segLength/this.segments.length));n<2*i&&(this.buildSegment(),n=this.segCount);for(var r=n>20?Math.floor(n/20):1,s=360,a=-1,l=this.segIdx+i;l<this.segCount;l+=r){var u=this.segments[l].sub(e||t),p=Math.abs(cc.misc.radiansToDegrees(Math.atan2(u.y,u.x)));if(p<=80){a=l;break}p<s&&(s=p,a=l)}return this.segIdx=-1!=a?a:this.segCount-1,this.toWorldPos(this.segments[this.segIdx])},e.prototype.getNextPoint=function(t){return this.pIdx++,this.pIdx==this.points.length&&(this.pIdx=0,this.loopCount++,t&&(t.endPath=!0)),this.toWorldPos(this.points[this.pIdx].pos)},e.prototype.setReferSpeed=function(t){this.referSpeed=t},e.prototype.getStartPos=function(){return this.toWorldPos(this.points[0].pos)},e.prototype.getStartAngle=function(){if(this.pathType==c.LINE){var t=this.points[1].pos.sub(this.points[0].pos);return a.Utils.getAngleDeg(t)}if(this.pathType==c.BEZIER){t=this.segments[1].sub(this.segments[0]);return a.Utils.getAngleDeg(t)}},Object.defineProperty(e.prototype,"currentPointIdx",{get:function(){return this.pIdx},enumerable:!0,configurable:!0}),e.prototype.getAngleAtPoint=function(t){return t<this.points.length-1?a.Utils.getAngleDeg(this.points[t].pos,this.points[t+1].pos):t==this.points.length-1?a.Utils.getAngleDeg(this.points[t].pos,this.points[0].pos):void 0},e.prototype.getAttachData=function(t){if(t<this.points.length)return this.points[t].data},e.prototype.toWorldPos=function(t){return this.node.convertToWorldSpaceAR(t)},e.prototype.buildSegment=function(){this.segIdx=0,this.segments=[];var t=this.nextPIdx;this.pathType==c.BEZIER&&this.pathLoopType==r.START&&0==t&&(this.pIdx=0,t=1);var e=this.points[this.pIdx].pos,n=this.points[t].pos,o=this.points[this.pIdx].cp2,i=this.points[t].cp1;this.pathType==c.BEZIER&&this.pathLoopType==r.BACK&&this.loopCount%2==1&&(o=this.points[this.pIdx].cp1,i=this.points[t].cp2),this.debug&&(this._segPath[0]=e,this._segPath[1]=o,this._segPath[2]=i,this._segPath[3]=n),this.segLength=0;for(var s=1;s<100;s++){var a=this.getBezierPoint(e,o,i,n,(s-1)/100),l=this.getBezierPoint(e,o,i,n,s/100);this.segLength+=l.sub(a).mag()}this.segCount=60*Math.ceil(this.segLength/(10*this.referSpeed));for(s=0;s<this.segCount;s++){var u=this.getBezierPoint(e,o,i,n,s/(this.segCount-1));this.segments.push(u)}this.pIdx=t},Object.defineProperty(e.prototype,"nextPIdx",{get:function(){return this.pathLoopType==r.START?this.pIdx<this.points.length-1?this.pIdx+1:(this.loopCount++,0):this.pathLoopType==r.LOOP?this.pIdx<this.points.length-1?this.pIdx+1:(this.loopCount++,0):this.pathLoopType==r.BACK?this.loopCount%2==0?this.pIdx<this.points.length-1?this.pIdx+1:(this.loopCount++,this.points.length-2):this.pIdx>0?this.pIdx-1:(this.loopCount++,1):void 0},enumerable:!0,configurable:!0}),e.prototype.getBezierPoint=function(t,e,n,o,i){var r=(1-i)*(1-i)*(1-i)*t.x+3*(1-i)*(1-i)*i*e.x+3*(1-i)*i*i*n.x+i*i*i*o.x,c=(1-i)*(1-i)*(1-i)*t.y+3*(1-i)*(1-i)*i*e.y+3*(1-i)*i*i*n.y+i*i*i*o.y;return cc.v2(r,c)},e.prototype.drawDebug=function(){this.graphics.clear();var t=this.pathType==c.LINE?this.points[this.pIdx].pos:this.segments[this.segIdx];this.graphics.moveTo(t.x,t.y),this.graphics.circle(t.x,t.y,8),this.graphics.fill(),4==this._segPath.length&&(this.graphics.strokeColor=this.pathColor,this.graphics.moveTo(this._segPath[0].x,this._segPath[0].y),this.graphics.bezierCurveTo(this._segPath[1].x,this._segPath[1].y,this._segPath[2].x,this._segPath[2].y,this._segPath[3].x,this._segPath[3].y),this.graphics.stroke())},e.prototype.updateEditMode=function(){this.edit?(null==this.graphics&&(this.graphics=this.node.addComponent(cc.Graphics)),this.graphics.clear(),this.drawChildNode(),this.drawPath()):null!=this.graphics&&(this.node.removeComponent(cc.Graphics),this.graphics=null)},e.prototype.drawPath=function(){if(!(this.node.childrenCount<2)){this.graphics.strokeColor=this.pathColor;for(var t=0;t<this.node.childrenCount;t++){var e=this.node.children[t];if(this.graphics.moveTo(e.x,e.y),t<this.node.childrenCount-1){var n=e.getComponent(s.default),o=this.node.children[t+1].getComponent(s.default);this.pathType==c.BEZIER?this.graphics.bezierCurveTo(n.cp2.x,n.cp2.y,o.cp1.x,o.cp1.y,o.node.x,o.node.y):this.pathType==c.LINE&&this.graphics.lineTo(o.node.x,o.node.y),this.graphics.stroke()}else if(this.pathLoopType==r.LOOP){n=e.getComponent(s.default),o=this.node.children[0].getComponent(s.default);this.pathType==c.BEZIER?this.graphics.bezierCurveTo(n.cp2.x,n.cp2.y,o.cp1.x,o.cp1.y,o.node.x,o.node.y):this.pathType==c.LINE&&this.graphics.lineTo(o.node.x,o.node.y),this.graphics.stroke()}}}},e.prototype.drawChildNode=function(){var t=this;this.graphics.fillColor=this.pathNodeColor,this.node.children.forEach(function(e){t.graphics.circle(e.x,e.y,3),t.graphics.fill()})},i([d()],e.prototype,"edit",void 0),i([d(cc.Color)],e.prototype,"pathColor",void 0),i([d(cc.Color)],e.prototype,"pathNodeColor",void 0),i([d({type:cc.Enum(c)})],e.prototype,"pathType",void 0),i([d({type:cc.Enum(r)})],e.prototype,"pathLoopType",void 0),e=i([u,p],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../utils":"utils","./path-node":"path-node"}],warning:[function(t,e,n){"use strict";cc._RF.push(e,"59017Y4TN9I7KvttLYBBD91","warning");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r,c=t("../collider-def"),s=cc._decorator,a=s.ccclass,l=s.property;(function(t){t[t.None=1]="None",t[t.EnemyBorn=2]="EnemyBorn",t[t.TadpolesMovingOut=4]="TadpolesMovingOut"})(r=n.WarningType||(n.WarningType={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.border=null,e.red=null,e.yellow=null,e.currentType=r.None,e.Time2ShowWarning=2,e.Blinks=5,e.BoxThick=40,e.frameCount=0,e}return o(e,t),e.prototype.onLoad=function(){var t=cc.view.getVisibleSize(),e=this.getComponents(cc.PhysicsBoxCollider);e[0].size.width=this.BoxThick,e[0].size.height=t.height,e[0].offset.x=.5*-(t.width-this.BoxThick),e[1].size.width=this.BoxThick,e[1].size.height=t.height,e[1].offset.x=.5*(t.width-this.BoxThick),e[2].size.width=t.width,e[2].size.height=this.BoxThick,e[2].offset.y=.5*(t.height-this.BoxThick),e[3].size.width=t.width,e[3].size.height=this.BoxThick,e[3].offset.y=.5*-(t.height-this.BoxThick),this.border.width=t.width,this.border.height=t.height,this.border.active=!1,this.red.active=!1,this.yellow.active=!1},e.prototype.show=function(t){this.currentType|=t,this.currentType&r.EnemyBorn&&this.currentType&r.TadpolesMovingOut||t==r.EnemyBorn||t==r.TadpolesMovingOut&&(this.border.active=!0,this.red.active=!0,this.red.position=cc.Vec2.ZERO)},e.prototype.hide=function(t){this.currentType&=~t,this.currentType==r.None&&(this.border.active=!1,this.border.active=!1,this.red.active=!1)},e.prototype.update=function(t){this.frameCount++,this.currentType&r.EnemyBorn&&this.currentType&r.TadpolesMovingOut||0!=(this.currentType&r.EnemyBorn)||this.currentType&r.TadpolesMovingOut&&(this.frameCount%20<10?(this.border.active=!0,this.red.active=!0):(this.border.active=!1,this.red.active=!1))},e.prototype.onBeginContact=function(t,e,n){n.node.groupIndex==c.CollidGroup.TADPOLE&&this.show(r.TadpolesMovingOut)},e.prototype.onEndContact=function(t,e,n){n.node.groupIndex==c.CollidGroup.TADPOLE&&this.hide(r.TadpolesMovingOut)},i([l(cc.Node)],e.prototype,"border",void 0),i([l(cc.Node)],e.prototype,"red",void 0),i([l(cc.Node)],e.prototype,"yellow",void 0),e=i([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../collider-def":"collider-def"}]},{},["config","event-manager","global-var","loader","localization","localstorage","popup","sound-manager","collider-def","bubble-controller","ech","enemy","food","gaumeo","level","nong-noc","ran","rua","sen","warning","control","game","iap-def","level-select-item","life-control","main-menu","path-node","vpath","spawner","player-ref","admob","analytics","facebook","iap","ui-controller","utils","LabelLocalized","RichTextLocalized","i18n","polyglot"]);